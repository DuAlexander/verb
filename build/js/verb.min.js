/*! verb 2015-10-05 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.verb=a()}}(function(){var verb={};if("function"==typeof require&&require)var Worker=require("webworker-threads").Worker;if("object"!=typeof window){var global=this,window=global,lookup=function(a,b){var c=global;return a.split(".").forEach(function(a){c&&(c=c[a])}),c?c[b]:null};onmessage=function(a){var b=lookup(a.data.className,a.data.methodName);return b?void postMessage({result:b.apply(null,a.data.args),id:a.data.id}):console.error("could not find "+a.data.className+"."+a.data.methodName)}}return function($hx_exports){"use strict";function $extend(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function $iterator(a){return a instanceof Array?function(){return HxOverrides.iter(a)}:"function"==typeof a.iterator?$bind(a,a.iterator):a.iterator}function $bind(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=$fid++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}$hx_exports.geom=$hx_exports.geom||{},$hx_exports.exe=$hx_exports.exe||{},$hx_exports.eval=$hx_exports.eval||{},$hx_exports.core=$hx_exports.core||{},$hx_exports.promhx=$hx_exports.promhx||{};var $estr=function(){return js.Boot.__string_rec(this,"")},HxOverrides=function(){};HxOverrides.__name__=["HxOverrides"],HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Lambda=function(){};Lambda.__name__=["Lambda"],Lambda.fold=function(a,b,c){for(var d=$iterator(a)();d.hasNext();){var e=d.next();c=b(e,c)}return c};var List=function(){this.length=0};List.__name__=["List"],List.prototype={add:function(a){var b=[a];null==this.h?this.h=b:this.q[1]=b,this.q=b,this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];return this.h=this.h[1],null==this.h&&(this.q=null),this.length--,a},isEmpty:function(){return null==this.h}};var IMap=function(){};IMap.__name__=["IMap"],Math.__name__=["Math"];var Type=function(){};Type.__name__=["Type"],Type.getClassName=function(a){var b=a.__name__;return b.join(".")};var haxe={};haxe.Log=function(){},haxe.Log.__name__=["haxe","Log"],haxe.Log.trace=function(a,b){js.Boot.__trace(a,b)},haxe.ds={},haxe.ds.IntMap=function(){this.h={}},haxe.ds.IntMap.__name__=["haxe","ds","IntMap"],haxe.ds.IntMap.__interfaces__=[IMap],haxe.ds.IntMap.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){return this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1}},haxe.ds.Option={__ename__:!0,__constructs__:["Some","None"]},haxe.ds.Option.Some=function(a){var b=["Some",0,a];return b.__enum__=haxe.ds.Option,b.toString=$estr,b},haxe.ds.Option.None=["None",1],haxe.ds.Option.None.toString=$estr,haxe.ds.Option.None.__enum__=haxe.ds.Option;var js={};js.Boot=function(){},js.Boot.__name__=["js","Boot"],js.Boot.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},js.Boot.__trace=function(a,b){var c;if(c=null!=b?b.fileName+":"+b.lineNumber+": ":"",c+=js.Boot.__string_rec(a,""),null!=b&&null!=b.customParams)for(var d=0,e=b.customParams;d<e.length;){var f=e[d];++d,c+=","+js.Boot.__string_rec(f,"")}var g;"undefined"!=typeof document&&null!=(g=document.getElementById("haxe:trace"))?g.innerHTML+=js.Boot.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)},js.Boot.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+js.Boot.__string_rec(a[g],b):js.Boot.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0;h>j;){var k=j++;i+=(k>0?",":"")+js.Boot.__string_rec(a[k],b)}return i+="]"}var l;try{l=a.toString}catch(m){return"???"}if(null!=l&&l!=Object.toString){var n=a.toString();if("[object Object]"!=n)return n}var o=null,p="{\n";b+="	";var q=null!=a.hasOwnProperty;for(var o in a)(!q||a.hasOwnProperty(o))&&"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=p.length&&(p+=", \n"),p+=b+o+" : "+js.Boot.__string_rec(a[o],b));return b=b.substring(1),p+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}};var promhx={};promhx.base={},promhx.base.AsyncBase=function(a){this._resolved=!1,this._pending=!1,this._errorPending=!1,this._fulfilled=!1,this._update=[],this._error=[],this._errored=!1,null!=a&&promhx.base.AsyncBase.link(a,this,function(a){return a})},promhx.base.AsyncBase.__name__=["promhx","base","AsyncBase"],promhx.base.AsyncBase.link=function(a,b,c){a._update.push({async:b,linkf:function(a){b.handleResolve(c(a))}}),promhx.base.AsyncBase.immediateLinkUpdate(a,b,c)},promhx.base.AsyncBase.immediateLinkUpdate=function(a,b,c){if(a._errored&&b.handleError(a._errorVal),a._resolved&&!a._pending)try{b.handleResolve(c(a._val))}catch(d){b.handleError(d)}},promhx.base.AsyncBase.linkAll=function(a,b){for(var c=function(c,d,e){if(0==c.length||promhx.base.AsyncBase.allFulfilled(c)){for(var f,g=[],h=$iterator(a)();h.hasNext();){var i=h.next();g.push(i==d?e:i._val)}f=g,b.handleResolve(f)}return null},d=$iterator(a)();d.hasNext();){var e=d.next();e._update.push({async:b,linkf:function(a,b,c){return function(d){return a(b,c,d)}}(c,function(b){for(var c,d=[],f=$iterator(a)();f.hasNext();){var g=f.next();g!=e&&d.push(g)}return c=d}(this),e)})}promhx.base.AsyncBase.allFulfilled(a)&&b.handleResolve(function(b){for(var c,d=[],e=$iterator(a)();e.hasNext();){var f=e.next();d.push(f._val)}return c=d}(this))},promhx.base.AsyncBase.pipeLink=function(a,b,c){var d=!1,e=function(a){if(!d){d=!0;var e=c(a);e._update.push({async:b,linkf:$bind(b,b.handleResolve)}),promhx.base.AsyncBase.immediateLinkUpdate(e,b,function(a){return a})}};if(a._update.push({async:b,linkf:e}),a._resolved&&!a._pending)try{e(a._val)}catch(f){b.handleError(f)}},promhx.base.AsyncBase.allResolved=function(a){for(var b=$iterator(a)();b.hasNext();){var c=b.next();if(!c._resolved)return!1}return!0},promhx.base.AsyncBase.allFulfilled=function(a){for(var b=$iterator(a)();b.hasNext();){var c=b.next();if(!c._fulfilled)return!1}return!0},promhx.base.AsyncBase.prototype={catchError:function(a){return this._error.push(a),this},errorThen:function(a){return this._errorMap=a,this},isResolved:function(){return this._resolved},isErrored:function(){return this._errored},isFulfilled:function(){return this._fulfilled},isPending:function(){return this._pending},handleResolve:function(a){this._resolve(a)},_resolve:function(a){var b=this;this._pending?promhx.base.EventLoop.enqueue(function(a,b){return function(){return a(b)}}($bind(this,this._resolve),a)):(this._resolved=!0,this._pending=!0,promhx.base.EventLoop.queue.add(function(){b._val=a;for(var c=0,d=b._update;c<d.length;){var e=d[c];++c;try{e.linkf(a)}catch(f){e.async.handleError(f)}}b._fulfilled=!0,b._pending=!1}),promhx.base.EventLoop.continueOnNextLoop())},handleError:function(a){this._handleError(a)},_handleError:function(a){var b=this,c=function(a){if(b._error.length>0)for(var c=0,d=b._error;c<d.length;){var e=d[c];++c,e(a)}else{if(!(b._update.length>0))throw a;for(var f=0,g=b._update;f<g.length;){var h=g[f];++f,h.async.handleError(a)}}b._errorPending=!1};this._errorPending||(this._errorPending=!0,this._errored=!0,this._errorVal=a,promhx.base.EventLoop.queue.add(function(){if(null!=b._errorMap)try{b._resolve(b._errorMap(a))}catch(d){c(d)}else c(a)}),promhx.base.EventLoop.continueOnNextLoop())},then:function(a){var b=new promhx.base.AsyncBase;return promhx.base.AsyncBase.link(this,b,a),b},unlink:function(a){var b=this;promhx.base.EventLoop.queue.add(function(){b._update=b._update.filter(function(b){return b.async!=a})}),promhx.base.EventLoop.continueOnNextLoop()},isLinked:function(a){for(var b=!1,c=0,d=this._update;c<d.length;){var e=d[c];if(++c,e.async==a)return!0}return b}},promhx.Deferred=$hx_exports.promhx.Deferred=function(){promhx.base.AsyncBase.call(this)},promhx.Deferred.__name__=["promhx","Deferred"],promhx.Deferred.__super__=promhx.base.AsyncBase,promhx.Deferred.prototype=$extend(promhx.base.AsyncBase.prototype,{resolve:function(a){this.handleResolve(a)},throwError:function(a){this.handleError(a)},promise:function(){return new promhx.Promise(this)},stream:function(){return new promhx.Stream(this)},publicStream:function(){return new promhx.PublicStream(this)}}),promhx.Promise=$hx_exports.promhx.Promise=function(a){promhx.base.AsyncBase.call(this,a),this._rejected=!1},promhx.Promise.__name__=["promhx","Promise"],promhx.Promise.whenAll=function(a){var b=new promhx.Promise;return promhx.base.AsyncBase.linkAll(a,b),b},promhx.Promise.promise=function(a){var b=new promhx.Promise;return b.handleResolve(a),b},promhx.Promise.__super__=promhx.base.AsyncBase,promhx.Promise.prototype=$extend(promhx.base.AsyncBase.prototype,{isRejected:function(){return this._rejected},reject:function(a){this._rejected=!0,this.handleError(a)},handleResolve:function(a){if(this._resolved){var b="Promise has already been resolved";throw promhx.error.PromiseError.AlreadyResolved(b)}this._resolve(a)},then:function(a){var b=new promhx.Promise;return promhx.base.AsyncBase.link(this,b,a),b},unlink:function(a){var b=this;promhx.base.EventLoop.queue.add(function(){if(b._fulfilled)b._update=b._update.filter(function(b){return b.async!=a});else{var c="Downstream Promise is not fullfilled";b.handleError(promhx.error.PromiseError.DownstreamNotFullfilled(c))}}),promhx.base.EventLoop.continueOnNextLoop()},handleError:function(a){this._rejected=!0,this._handleError(a)},pipe:function(a){var b=new promhx.Promise;return promhx.base.AsyncBase.pipeLink(this,b,a),b},errorPipe:function(a){var b=new promhx.Promise;return this.catchError(function(c){var d=a(c);d.then($bind(b,b._resolve))}),this.then($bind(b,b._resolve)),b}}),promhx.Stream=$hx_exports.promhx.Stream=function(a){promhx.base.AsyncBase.call(this,a),this._end_deferred=new promhx.Deferred,this._end_promise=this._end_deferred.promise()},promhx.Stream.__name__=["promhx","Stream"],promhx.Stream.foreach=function(a){for(var b=new promhx.Stream,c=$iterator(a)();c.hasNext();){var d=c.next();b.handleResolve(d)}return b.end(),b},promhx.Stream.wheneverAll=function(a){var b=new promhx.Stream;return promhx.base.AsyncBase.linkAll(a,b),b},promhx.Stream.concatAll=function(a){for(var b=new promhx.Stream,c=$iterator(a)();c.hasNext();){var d=c.next();b.concat(d)}return b},promhx.Stream.mergeAll=function(a){for(var b=new promhx.Stream,c=$iterator(a)();c.hasNext();){var d=c.next();b.merge(d)}return b},promhx.Stream.stream=function(a){var b=new promhx.Stream;return b.handleResolve(a),b},promhx.Stream.__super__=promhx.base.AsyncBase,promhx.Stream.prototype=$extend(promhx.base.AsyncBase.prototype,{then:function(a){var b=new promhx.Stream;return promhx.base.AsyncBase.link(this,b,a),this._end_promise.then(function(a){b.end()}),b},detachStream:function(a){for(var b=[],c=!1,d=0,e=this._update;d<e.length;){var f=e[d];++d,f.async==a?c=!0:b.push(f)}return this._update=b,c},first:function(){var a=new promhx.Promise;return this.then(function(b){a._resolved||a.handleResolve(b)}),a},handleResolve:function(a){this._end||this._pause||this._resolve(a)},pause:function(a){null==a&&(a=!this._pause),this._pause=a},pipe:function(a){var b=new promhx.Stream;return promhx.base.AsyncBase.pipeLink(this,b,a),this._end_promise.then(function(a){b.end()}),b},errorPipe:function(a){var b=new promhx.Stream;return this.catchError(function(c){var d=a(c);d.then($bind(b,b._resolve)),d._end_promise.then(($_=b._end_promise,$bind($_,$_._resolve)))}),this.then($bind(b,b._resolve)),this._end_promise.then(function(a){b.end()}),b},handleEnd:function(){if(this._pending)promhx.base.EventLoop.queue.add($bind(this,this.handleEnd)),promhx.base.EventLoop.continueOnNextLoop();else{if(this._end_promise._resolved)return;this._end=!0;var a;a=this._resolved?haxe.ds.Option.Some(this._val):haxe.ds.Option.None,this._end_promise.handleResolve(a),this._update=[],this._error=[]}},end:function(){return promhx.base.EventLoop.queue.add($bind(this,this.handleEnd)),promhx.base.EventLoop.continueOnNextLoop(),this},endThen:function(a){return this._end_promise.then(a)},filter:function(a){var b=new promhx.Stream;return this._update.push({async:b,linkf:function(c){a(c)&&b.handleResolve(c)}}),promhx.base.AsyncBase.immediateLinkUpdate(this,b,function(a){return a}),b},concat:function(a){var b=new promhx.Stream;return this._update.push({async:b,linkf:$bind(b,b.handleResolve)}),promhx.base.AsyncBase.immediateLinkUpdate(this,b,function(a){return a}),this._end_promise.then(function(c){a.pipe(function(a){return b.handleResolve(a),b}),a._end_promise.then(function(a){b.end()})}),b},merge:function(a){var b=new promhx.Stream;return this._update.push({async:b,linkf:$bind(b,b.handleResolve)}),a._update.push({async:b,linkf:$bind(b,b.handleResolve)}),promhx.base.AsyncBase.immediateLinkUpdate(this,b,function(a){return a}),promhx.base.AsyncBase.immediateLinkUpdate(a,b,function(a){return a}),b}}),promhx.PublicStream=$hx_exports.promhx.PublicStream=function(a){promhx.Stream.call(this,a)},promhx.PublicStream.__name__=["promhx","PublicStream"],promhx.PublicStream.publicstream=function(a){var b=new promhx.PublicStream;return b.handleResolve(a),b},promhx.PublicStream.__super__=promhx.Stream,promhx.PublicStream.prototype=$extend(promhx.Stream.prototype,{resolve:function(a){this.handleResolve(a)},throwError:function(a){this.handleError(a)},update:function(a){this.handleResolve(a)}}),promhx.base.EventLoop=function(){},promhx.base.EventLoop.__name__=["promhx","base","EventLoop"],promhx.base.EventLoop.enqueue=function(a){promhx.base.EventLoop.queue.add(a),promhx.base.EventLoop.continueOnNextLoop()},promhx.base.EventLoop.set_nextLoop=function(a){if(null!=promhx.base.EventLoop.nextLoop)throw"nextLoop has already been set";return promhx.base.EventLoop.nextLoop=a,promhx.base.EventLoop.nextLoop},promhx.base.EventLoop.queueEmpty=function(){return promhx.base.EventLoop.queue.isEmpty()},promhx.base.EventLoop.finish=function(a){null==a&&(a=1e3);for(var b=null;a-->0&&null!=(b=promhx.base.EventLoop.queue.pop());)b();return promhx.base.EventLoop.queue.isEmpty()},promhx.base.EventLoop.clear=function(){promhx.base.EventLoop.queue=new List},promhx.base.EventLoop.f=function(){var a=promhx.base.EventLoop.queue.pop();null!=a&&a(),promhx.base.EventLoop.queue.isEmpty()||promhx.base.EventLoop.continueOnNextLoop()},promhx.base.EventLoop.continueOnNextLoop=function(){null!=promhx.base.EventLoop.nextLoop?promhx.base.EventLoop.nextLoop(promhx.base.EventLoop.f):setImmediate(promhx.base.EventLoop.f)},promhx.error={},promhx.error.PromiseError={__ename__:!0,__constructs__:["AlreadyResolved","DownstreamNotFullfilled"]},promhx.error.PromiseError.AlreadyResolved=function(a){var b=["AlreadyResolved",0,a];return b.__enum__=promhx.error.PromiseError,b.toString=$estr,b},promhx.error.PromiseError.DownstreamNotFullfilled=function(a){var b=["DownstreamNotFullfilled",1,a];return b.__enum__=promhx.error.PromiseError,b.toString=$estr,b};var verb={};verb.Verb=function(){},verb.Verb.__name__=["verb","Verb"],verb.Verb.main=function(){haxe.Log.trace("verb 2.0.0",{fileName:"Verb.hx",lineNumber:45,className:"verb.Verb",methodName:"main"})},verb.core={},verb.core.AdaptiveRefinementOptions=$hx_exports.core.AdaptiveRefinementOptions=function(){this.minDivsV=1,this.minDivsU=1,this.refine=!0,this.maxDepth=10,this.minDepth=0,this.normTol=.025},verb.core.AdaptiveRefinementOptions.__name__=["verb","core","AdaptiveRefinementOptions"],verb.core.AdaptiveRefinementNode=$hx_exports.core.AdaptiveRefinementNode=function(a,b,c){if(this.srf=a,null==c?this.neighbors=[null,null,null,null]:this.neighbors=c,this.corners=b,null==this.corners){var d=a.knotsU[0],e=verb.core.ArrayExtensions.last(a.knotsU),f=a.knotsV[0],g=verb.core.ArrayExtensions.last(a.knotsV);this.corners=[verb.core.SurfacePoint.fromUv(d,f),verb.core.SurfacePoint.fromUv(e,f),verb.core.SurfacePoint.fromUv(e,g),verb.core.SurfacePoint.fromUv(d,g)]}},verb.core.AdaptiveRefinementNode.__name__=["verb","core","AdaptiveRefinementNode"],verb.core.AdaptiveRefinementNode.prototype={isLeaf:function(){return null==this.children},center:function(){return null!=this.centerPoint?this.centerPoint:this.evalSrf(this.u05,this.v05)},evalCorners:function(){this.u05=(this.corners[0].uv[0]+this.corners[2].uv[0])/2,this.v05=(this.corners[0].uv[1]+this.corners[2].uv[1])/2;for(var a=0;4>a;){var b=a++;if(null==this.corners[b].point){var c=this.corners[b];this.evalSrf(c.uv[0],c.uv[1],c)}}},evalSrf:function(a,b,c){var d=verb.eval.Eval.rationalSurfaceDerivatives(this.srf,a,b,1),e=d[0][0],f=verb.core.Vec.cross(d[0][1],d[1][0]),g=verb.core.Vec.isZero(f);return g||(f=verb.core.Vec.normalized(f)),null!=c?(c.degen=g,c.point=e,c.normal=f,c):new verb.core.SurfacePoint(e,f,[a,b],-1,g)},getEdgeCorners:function(a){if(this.isLeaf())return[this.corners[a]];if(this.horizontal)switch(a){case 0:return this.children[0].getEdgeCorners(0);case 1:return this.children[0].getEdgeCorners(1).concat(this.children[1].getEdgeCorners(1));case 2:return this.children[1].getEdgeCorners(2);case 3:return this.children[1].getEdgeCorners(3).concat(this.children[0].getEdgeCorners(3))}switch(a){case 0:return this.children[0].getEdgeCorners(0).concat(this.children[1].getEdgeCorners(0));case 1:return this.children[1].getEdgeCorners(1);case 2:return this.children[1].getEdgeCorners(2).concat(this.children[0].getEdgeCorners(2));case 3:return this.children[0].getEdgeCorners(3)}return null},getAllCorners:function(a){var b=[this.corners[a]];if(null==this.neighbors[a])return b;var c=this.neighbors[a].getEdgeCorners((a+2)%4),d=a%2,e=verb.core.Constants.EPSILON,f=this,g=[function(a){return a.uv[0]>f.corners[0].uv[0]+e&&a.uv[0]<f.corners[2].uv[0]-e},function(a){return a.uv[1]>f.corners[0].uv[1]+e&&a.uv[1]<f.corners[2].uv[1]-e}],h=c.filter(g[d]);return h.reverse(),b.concat(h)},midpoint:function(a){if(null==this.midPoints&&(this.midPoints=[null,null,null,null]),null!=this.midPoints[a])return this.midPoints[a];switch(a){case 0:this.midPoints[0]=this.evalSrf(this.u05,this.corners[0].uv[1]);break;case 1:this.midPoints[1]=this.evalSrf(this.corners[1].uv[0],this.v05);break;case 2:this.midPoints[2]=this.evalSrf(this.u05,this.corners[2].uv[1]);break;case 3:this.midPoints[3]=this.evalSrf(this.corners[0].uv[0],this.v05)}return this.midPoints[a]},hasBadNormals:function(){return this.corners[0].degen||this.corners[1].degen||this.corners[2].degen||this.corners[3].degen},fixNormals:function(){for(var a=this.corners.length,b=0;a>b;){var c=b++;this.corners[c];if(this.corners[c].degen){var d=this.corners[(c+1)%a],e=this.corners[(c+3)%a];d.degen?this.corners[c].normal=e.normal:this.corners[c].normal=d.normal}}},shouldDivide:function(a,b){if(b<a.minDepth)return!0;if(b>=a.maxDepth)return!1;if(this.hasBadNormals())return this.fixNormals(),!1;if(this.splitVert=verb.core.Vec.normSquared(verb.core.Vec.sub(this.corners[0].normal,this.corners[1].normal))>a.normTol||verb.core.Vec.normSquared(verb.core.Vec.sub(this.corners[2].normal,this.corners[3].normal))>a.normTol,this.splitHoriz=verb.core.Vec.normSquared(verb.core.Vec.sub(this.corners[1].normal,this.corners[2].normal))>a.normTol||verb.core.Vec.normSquared(verb.core.Vec.sub(this.corners[3].normal,this.corners[0].normal))>a.normTol,this.splitVert||this.splitHoriz)return!0;var c=this.center();return verb.core.Vec.normSquared(verb.core.Vec.sub(c.normal,this.corners[0].normal))>a.normTol||verb.core.Vec.normSquared(verb.core.Vec.sub(c.normal,this.corners[1].normal))>a.normTol||verb.core.Vec.normSquared(verb.core.Vec.sub(c.normal,this.corners[2].normal))>a.normTol||verb.core.Vec.normSquared(verb.core.Vec.sub(c.normal,this.corners[3].normal))>a.normTol},divide:function(a){null==a&&(a=new verb.core.AdaptiveRefinementOptions),null==a.normTol&&(a.normTol=.085),null==a.minDepth&&(a.minDepth=0),null==a.maxDepth&&(a.maxDepth=10),this._divide(a,0,!0)},_divide:function(a,b,c){if(this.evalCorners(),this.shouldDivide(a,b)){if(b++,this.splitVert&&!this.splitHoriz?c=!1:!this.splitVert&&this.splitHoriz&&(c=!0),this.horizontal=c,this.horizontal){var d=[this.corners[0],this.corners[1],this.midpoint(1),this.midpoint(3)],e=[this.midpoint(3),this.midpoint(1),this.corners[2],this.corners[3]];this.children=[new verb.core.AdaptiveRefinementNode(this.srf,d),new verb.core.AdaptiveRefinementNode(this.srf,e)],this.children[0].neighbors=[this.neighbors[0],this.neighbors[1],this.children[1],this.neighbors[3]],this.children[1].neighbors=[this.children[0],this.neighbors[1],this.neighbors[2],this.neighbors[3]]}else{var f=[this.corners[0],this.midpoint(0),this.midpoint(2),this.corners[3]],g=[this.midpoint(0),this.corners[1],this.corners[2],this.midpoint(2)];this.children=[new verb.core.AdaptiveRefinementNode(this.srf,f),new verb.core.AdaptiveRefinementNode(this.srf,g)],this.children[0].neighbors=[this.neighbors[0],this.children[1],this.neighbors[2],this.neighbors[3]],this.children[1].neighbors=[this.neighbors[0],this.neighbors[1],this.neighbors[2],this.children[0]]}for(var h=0,i=this.children;h<i.length;){var j=i[h];++h,j._divide(a,b,!c)}}},triangulate:function(a){if(null==a&&(a=verb.core.MeshData.empty()),this.isLeaf())return this.triangulateLeaf(a);for(var b=0,c=this.children;b<c.length;){var d=c[b];if(++b,null==d)break;d.triangulate(a)}return a},triangulateLeaf:function(a){for(var b=a.points.length,c=[],d=[],e=0,f=0;4>f;){var g=f++,h=this.getAllCorners(g);2==h.length&&(e=g+1);for(var i=0,j=h.length;j>i;){var k=i++;c.push(h[k])}}for(var l=0;l<c.length;){var m=c[l];++l,-1==m.id?(a.uvs.push(m.uv),a.points.push(m.point),a.normals.push(m.normal),m.id=b,d.push(b),b++):d.push(m.id)}if(4==c.length)return a.faces.push([d[0],d[3],d[1]]),a.faces.push([d[3],d[2],d[1]]),a;if(5==c.length){var n=d.length;return a.faces.push([d[e],d[(e+2)%n],d[(e+1)%n]]),a.faces.push([d[(e+4)%n],d[(e+3)%n],d[e]]),a.faces.push([d[e],d[(e+3)%n],d[(e+2)%n]]),a}var o=this.center();a.uvs.push(o.uv),a.points.push(o.point),a.normals.push(o.normal);for(var p=a.points.length-1,q=0,r=c.length-1;q<c.length;)a.faces.push([p,d[q],d[r]]),r=q++;return a}},verb.core.ArrayExtensions=function(){},verb.core.ArrayExtensions.__name__=["verb","core","ArrayExtensions"],verb.core.ArrayExtensions.alloc=function(a,b){if(!(0>b))for(;a.length<b;)a.push(null)},verb.core.ArrayExtensions.reversed=function(a){var b=a.slice();return b.reverse(),b},verb.core.ArrayExtensions.last=function(a){return a[a.length-1]},verb.core.ArrayExtensions.first=function(a){return a[0]},verb.core.ArrayExtensions.spliceAndInsert=function(a,b,c,d){a.splice(b,c),a.splice(b,0,d)},verb.core.ArrayExtensions.left=function(a){if(0==a.length)return[];var b=Math.ceil(a.length/2);return a.slice(0,b)},verb.core.ArrayExtensions.right=function(a){if(0==a.length)return[];var b=Math.ceil(a.length/2);return a.slice(b)},verb.core.ArrayExtensions.rightWithPivot=function(a){if(0==a.length)return[];var b=Math.ceil(a.length/2);return a.slice(b-1)},verb.core.ArrayExtensions.unique=function(a,b){if(0==a.length)return[];for(var c=[a.pop()];a.length>0;){for(var d=a.pop(),e=!0,f=0;f<c.length;){var g=c[f];if(++f,b(d,g)){e=!1;break}}e&&c.push(d)}return c},verb.core.Binomial=function(){},verb.core.Binomial.__name__=["verb","core","Binomial"],verb.core.Binomial.get=function(a,b){if(0==b)return 1;if(0==a||b>a)return 0;if(b>a-b&&(b=a-b),verb.core.Binomial.memo_exists(a,b))return verb.core.Binomial.get_memo(a,b);for(var c=1,d=a,e=1,f=b+1;f>e;){var g=e++;verb.core.Binomial.memo_exists(d,g)?(a--,c=verb.core.Binomial.get_memo(d,g)):(c*=a--,c/=g,verb.core.Binomial.memoize(d,g,c))}return c},verb.core.Binomial.get_no_memo=function(a,b){if(0==b)return 1;if(0==a||b>a)return 0;b>a-b&&(b=a-b);for(var c=1,d=1,e=b+1;e>d;){var f=d++;c*=a--,c/=f}return c},verb.core.Binomial.memo_exists=function(a,b){return verb.core.Binomial.memo.exists(a)&&verb.core.Binomial.memo.get(a).exists(b)},verb.core.Binomial.get_memo=function(a,b){return verb.core.Binomial.memo.get(a).get(b)},verb.core.Binomial.memoize=function(a,b,c){verb.core.Binomial.memo.exists(a)||verb.core.Binomial.memo.set(a,new haxe.ds.IntMap),verb.core.Binomial.memo.get(a).set(b,c)},verb.core.BoundingBox=$hx_exports.core.BoundingBox=function(a){this.max=null,this.min=null,this.dim=3,this.initialized=!1,null!=a&&this.addRange(a)},verb.core.BoundingBox.__name__=["verb","core","BoundingBox"],verb.core.BoundingBox.intervalsOverlap=function(a,b,c,d,e){null==e&&(e=-1);var f;f=-.5>e?verb.core.Constants.TOLERANCE:e;var g=Math.min(a,b)-f,h=Math.max(a,b)+f,i=Math.min(c,d)-f,j=Math.max(c,d)+f;return g>=i&&j>=g||h>=i&&j>=h||i>=g&&h>=i||j>=g&&h>=j},verb.core.BoundingBox.prototype={fromPoint:function(a){return new verb.core.BoundingBox([a])},add:function(a){if(!this.initialized)return this.dim=a.length,this.min=a.slice(0),this.max=a.slice(0),this.initialized=!0,this;for(var b=0,c=this.dim;c>b;){var d=b++;a[d]>this.max[d]&&(this.max[d]=a[d]),a[d]<this.min[d]&&(this.min[d]=a[d])}return this},addRange:function(a){for(var b=a.length,c=0;b>c;){var d=c++;this.add(a[d])}return this},contains:function(a,b){return null==b&&(b=-1),this.initialized?this.intersects(new verb.core.BoundingBox([a]),b):!1},intersects:function(a,b){if(null==b&&(b=-1),!this.initialized||!a.initialized)return!1;for(var c=this.min,d=this.max,e=a.min,f=a.max,g=0,h=this.dim;h>g;){var i=g++;if(!verb.core.BoundingBox.intervalsOverlap(c[i],d[i],e[i],f[i],b))return!1}return!0},clear:function(){return this.initialized=!1,this},getLongestAxis:function(){for(var a=0,b=0,c=0,d=this.dim;d>c;){var e=c++,f=this.getAxisLength(e);f>a&&(a=f,b=e)}return b},getAxisLength:function(a){return 0>a||a>this.dim-1?0:Math.abs(this.min[a]-this.max[a])},intersect:function(a,b){if(!this.initialized)return null;var c=this.min,d=this.max,e=a.min,f=a.max;if(!this.intersects(a,b))return null;for(var g=[],h=[],i=0,j=this.dim;j>i;){var k=i++;g.push(Math.min(d[k],f[k])),h.push(Math.max(c[k],e[k]))}return new verb.core.BoundingBox([h,g])}},verb.core.Constants=$hx_exports.core.Constants=function(){},verb.core.Constants.__name__=["verb","core","Constants"],verb.core.CurveLengthSample=$hx_exports.core.CurveLengthSample=function(a,b){this.u=a,this.len=b},verb.core.CurveLengthSample.__name__=["verb","core","CurveLengthSample"],verb.core.NurbsSurfaceData=$hx_exports.core.NurbsSurfaceData=function(a,b,c,d,e,f,g){null==g&&(g=!1),null==f&&(f=!1),this.degreeU=a,this.degreeV=b,this.knotsU=c,this.knotsV=d,this.controlPoints=e,this.closedU=f,this.closedV=g},verb.core.NurbsSurfaceData.__name__=["verb","core","NurbsSurfaceData"],verb.core.NurbsCurveData=$hx_exports.core.NurbsCurveData=function(a,b,c,d){null==d&&(d=!1),this.degree=a,this.controlPoints=c,this.knots=b,this.closed=d},verb.core.NurbsCurveData.__name__=["verb","core","NurbsCurveData"],verb.core.MeshData=$hx_exports.core.MeshData=function(a,b,c,d){this.faces=a,this.points=b,this.normals=c,this.uvs=d},verb.core.MeshData.__name__=["verb","core","MeshData"],verb.core.MeshData.empty=function(){return new verb.core.MeshData([],[],[],[])},verb.core.PolylineData=$hx_exports.core.PolylineData=function(a,b){this.points=a,this.params=b},verb.core.PolylineData.__name__=["verb","core","PolylineData"],verb.core.VolumeData=$hx_exports.core.VolumeData=function(a,b,c,d,e,f,g){this.degreeU=a,this.degreeV=b,this.degreeW=c,this.knotsU=d,this.knotsV=e,this.knotsW=f,this.controlPoints=g},verb.core.VolumeData.__name__=["verb","core","VolumeData"],verb.core.IBoundingBoxTree=function(){},verb.core.IBoundingBoxTree.__name__=["verb","core","IBoundingBoxTree"],verb.core.CurveCurveIntersection=$hx_exports.core.CurveCurveIntersection=function(a,b,c,d){this.point0=a,this.point1=b,this.u0=c,this.u1=d},verb.core.CurveCurveIntersection.__name__=["verb","core","CurveCurveIntersection"],verb.core.CurveSurfaceIntersection=$hx_exports.core.CurveSurfaceIntersection=function(a,b,c,d){this.u=a,this.uv=b,this.curvePoint=c,this.surfacePoint=d},verb.core.CurveSurfaceIntersection.__name__=["verb","core","CurveSurfaceIntersection"],verb.core.MeshIntersectionPoint=$hx_exports.core.MeshIntersectionPoint=function(a,b,c,d,e){this.visited=!1,this.adj=null,this.opp=null,this.uv0=a,this.uv1=b,this.point=c,this.faceIndex0,this.faceIndex1},verb.core.MeshIntersectionPoint.__name__=["verb","core","MeshIntersectionPoint"],verb.core.PolylineMeshIntersection=$hx_exports.core.PolylineMeshIntersection=function(a,b,c,d,e){this.point=a,this.u=b,this.uv=c,this.polylineIndex=d,this.faceIndex=e},verb.core.PolylineMeshIntersection.__name__=["verb","core","PolylineMeshIntersection"],verb.core.SurfaceSurfaceIntersectionPoint=$hx_exports.core.SurfaceSurfaceIntersectionPoint=function(a,b,c,d){this.uv0=a,this.uv1=b,this.point=c,this.dist=d},verb.core.SurfaceSurfaceIntersectionPoint.__name__=["verb","core","SurfaceSurfaceIntersectionPoint"],verb.core.TriSegmentIntersection=$hx_exports.core.TriSegmentIntersection=function(a,b,c,d){this.point=a,this.s=b,this.t=c,this.p=d},verb.core.TriSegmentIntersection.__name__=["verb","core","TriSegmentIntersection"],verb.core.CurveTriPoint=$hx_exports.core.CurveTriPoint=function(a,b,c){this.u=a,this.point=b,this.uv=c},verb.core.CurveTriPoint.__name__=["verb","core","CurveTriPoint"],verb.core.SurfacePoint=function(a,b,c,d,e){null==e&&(e=!1),null==d&&(d=-1),this.uv=c,this.point=a,this.normal=b,this.id=d,this.degen=e},verb.core.SurfacePoint.__name__=["verb","core","SurfacePoint"],verb.core.SurfacePoint.fromUv=function(a,b){return new verb.core.SurfacePoint(null,null,[a,b])},verb.core.CurvePoint=$hx_exports.core.CurvePoint=function(a,b){this.u=a,this.pt=b},verb.core.CurvePoint.__name__=["verb","core","CurvePoint"],verb.core.Interval=$hx_exports.core.Interval=function(a,b){this.min=a,this.max=b},verb.core.Interval.__name__=["verb","core","Interval"],verb.core.KdTree=$hx_exports.core.KdTree=function(a,b){this.dim=3,this.points=a,this.distanceFunction=b,this.dim=a[0].point.length,this.root=this.buildTree(a,0,null)},verb.core.KdTree.__name__=["verb","core","KdTree"],verb.core.KdTree.prototype={buildTree:function(a,b,c){var d,e,f=b%this.dim;return 0==a.length?null:1==a.length?new verb.core.KdNode(a[0],f,c):(a.sort(function(a,b){var c=a.point[f]-b.point[f];return 0==c?0:c>0?1:-1}),d=Math.floor(a.length/2),e=new verb.core.KdNode(a[d],f,c),e.left=this.buildTree(a.slice(0,d),b+1,e),e.right=this.buildTree(a.slice(d+1),b+1,e),e)},nearest:function(a,b,c){var d,e=this,f=new verb.core.BinaryHeap(function(a){return-a.item1}),g=null;g=function(c){for(var d,h,i=c.dimension,j=e.distanceFunction(a,c.kdPoint.point),k=[],l=0,m=e.dim;m>l;){l++;k.push(0)}h=k;for(var n,o,p=function(a,c){f.push(new verb.core.Pair(a,c)),f.size()>b&&f.pop()},q=0,r=e.dim;r>q;){var s=q++;s==c.dimension?h[s]=a[s]:h[s]=c.kdPoint.point[s]}return n=e.distanceFunction(h,c.kdPoint.point),null==c.right&&null==c.left?void((f.size()<b||j<f.peek().item1)&&p(c,j)):(d=null==c.right?c.left:null==c.left?c.right:a[i]<c.kdPoint.point[i]?c.left:c.right,g(d),(f.size()<b||j<f.peek().item1)&&p(c,j),void((f.size()<b||Math.abs(n)<f.peek().item1)&&(o=d==c.left?c.right:c.left,null!=o&&g(o))))},d=g;for(var h=0;b>h;){h++;f.push(new verb.core.Pair(null,c))}d(this.root);for(var i=[],j=0;b>j;){var k=j++;null!=f.content[k].item0&&i.push(new verb.core.Pair(f.content[k].item0.kdPoint,f.content[k].item1))}return i}},verb.core.BinaryHeap=function(a){this.content=[],this.scoreFunction=a},verb.core.BinaryHeap.__name__=["verb","core","BinaryHeap"],verb.core.BinaryHeap.prototype={
push:function(a){this.content.push(a),this.bubbleUp(this.content.length-1)},pop:function(){var a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.sinkDown(0)),a},peek:function(){return this.content[0]},remove:function(a){for(var b=this.content.length,c=0;b>c;){var d=c++;if(this.content[d]==a){var e=this.content.pop();return void(d!=b-1&&(this.content[d]=e,this.scoreFunction(e)<this.scoreFunction(a)?this.bubbleUp(d):this.sinkDown(d)))}}throw"Node not found."},size:function(){return this.content.length},bubbleUp:function(a){for(var b=this.content[a];a>0;){var c=Math.floor((a+1)/2)-1,d=this.content[c];if(!(this.scoreFunction(b)<this.scoreFunction(d)))break;this.content[c]=b,this.content[a]=d,a=c}},sinkDown:function(a){for(var b=this.content.length,c=this.content[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,g=-1,h=0;if(b>f){var i=this.content[f];h=this.scoreFunction(i),d>h&&(g=f)}if(b>e){var j=this.content[e],k=this.scoreFunction(j);(-1==g?d:h)>k&&(g=e)}if(-1==g)break;this.content[a]=this.content[g],this.content[g]=c,a=g}}},verb.core.KdPoint=$hx_exports.core.KdPoint=function(a,b){this.point=a,this.obj=b},verb.core.KdPoint.__name__=["verb","core","KdPoint"],verb.core.KdNode=$hx_exports.core.KdNode=function(a,b,c){this.kdPoint=a,this.left=null,this.right=null,this.parent=c,this.dimension=b},verb.core.KdNode.__name__=["verb","core","KdNode"],verb.core.LazyCurveBoundingBoxTree=function(a,b){this._boundingBox=null,this._curve=a,null==b&&(b=verb.core.Vec.domain(this._curve.knots)/64),this._knotTol=b},verb.core.LazyCurveBoundingBoxTree.__name__=["verb","core","LazyCurveBoundingBoxTree"],verb.core.LazyCurveBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.LazyCurveBoundingBoxTree.prototype={split:function(){var a=verb.core.ArrayExtensions.first(this._curve.knots),b=verb.core.ArrayExtensions.last(this._curve.knots),c=b-a,d=verb.eval.Divide.curveSplit(this._curve,(b+a)/2+.1*c*Math.random());return new verb.core.Pair(new verb.core.LazyCurveBoundingBoxTree(d[0],this._knotTol),new verb.core.LazyCurveBoundingBoxTree(d[1],this._knotTol))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new verb.core.BoundingBox(verb.eval.Eval.dehomogenize1d(this._curve.controlPoints))),this._boundingBox},"yield":function(){return this._curve},indivisible:function(a){return verb.core.Vec.domain(this._curve.knots)<this._knotTol},empty:function(){return!1}},verb.core.LazyMeshBoundingBoxTree=function(a,b){if(this._boundingBox=null,this._mesh=a,null==b){for(var c=[],d=0,e=a.faces.length;e>d;){var f=d++;c.push(f)}b=c}this._faceIndices=b},verb.core.LazyMeshBoundingBoxTree.__name__=["verb","core","LazyMeshBoundingBoxTree"],verb.core.LazyMeshBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.LazyMeshBoundingBoxTree.prototype={split:function(){var a=verb.core.Mesh.sortTrianglesOnLongestAxis(this.boundingBox(),this._mesh,this._faceIndices),b=verb.core.ArrayExtensions.left(a),c=verb.core.ArrayExtensions.right(a);return new verb.core.Pair(new verb.core.LazyMeshBoundingBoxTree(this._mesh,b),new verb.core.LazyMeshBoundingBoxTree(this._mesh,c))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=verb.core.Mesh.makeMeshAabb(this._mesh,this._faceIndices)),this._boundingBox},"yield":function(){return this._faceIndices[0]},indivisible:function(a){return 1==this._faceIndices.length},empty:function(){return 0==this._faceIndices.length}},verb.core.LazyPolylineBoundingBoxTree=function(a,b){this._boundingBox=null,this._polyline=a,null==b&&(b=new verb.core.Interval(0,0!=a.points.length?a.points.length-1:0)),this._interval=b},verb.core.LazyPolylineBoundingBoxTree.__name__=["verb","core","LazyPolylineBoundingBoxTree"],verb.core.LazyPolylineBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.LazyPolylineBoundingBoxTree.prototype={split:function(){var a=this._interval.min,b=this._interval.max,c=a+Math.ceil((b-a)/2),d=new verb.core.Interval(a,c),e=new verb.core.Interval(c,b);return new verb.core.Pair(new verb.core.LazyPolylineBoundingBoxTree(this._polyline,d),new verb.core.LazyPolylineBoundingBoxTree(this._polyline,e))},boundingBox:function(){return null==this._boundingBox&&(this._boundingBox=new verb.core.BoundingBox(this._polyline.points)),this._boundingBox},"yield":function(){return this._interval.min},indivisible:function(a){return this._interval.max-this._interval.min==1},empty:function(){return this._interval.max-this._interval.min==0}},verb.core.LazySurfaceBoundingBoxTree=function(a,b,c,d){null==b&&(b=!1),this._boundingBox=null,this._surface=a,this._splitV=b,null==c&&(c=verb.core.Vec.domain(a.knotsU)/16),null==d&&(d=verb.core.Vec.domain(a.knotsV)/16),this._knotTolU=c,this._knotTolV=d},verb.core.LazySurfaceBoundingBoxTree.__name__=["verb","core","LazySurfaceBoundingBoxTree"],verb.core.LazySurfaceBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.LazySurfaceBoundingBoxTree.prototype={split:function(){var a,b;this._splitV?(a=verb.core.ArrayExtensions.first(this._surface.knotsV),b=verb.core.ArrayExtensions.last(this._surface.knotsV)):(a=verb.core.ArrayExtensions.first(this._surface.knotsU),b=verb.core.ArrayExtensions.last(this._surface.knotsU));var c=(a+b)/2,d=verb.eval.Divide.surfaceSplit(this._surface,c,this._splitV);return new verb.core.Pair(new verb.core.LazySurfaceBoundingBoxTree(d[0],!this._splitV,this._knotTolU,this._knotTolV),new verb.core.LazySurfaceBoundingBoxTree(d[1],!this._splitV,this._knotTolU,this._knotTolV))},boundingBox:function(){if(null==this._boundingBox){this._boundingBox=new verb.core.BoundingBox;for(var a=0,b=this._surface.controlPoints;a<b.length;){var c=b[a];++a,this._boundingBox.addRange(verb.eval.Eval.dehomogenize1d(c))}}return this._boundingBox},"yield":function(){return this._surface},indivisible:function(a){return verb.core.Vec.domain(this._surface.knotsV)<this._knotTolV&&verb.core.Vec.domain(this._surface.knotsU)<this._knotTolU},empty:function(){return!1}},verb.core.Mat=$hx_exports.core.Mat=function(){},verb.core.Mat.__name__=["verb","core","Mat"],verb.core.Mat.mul=function(a,b){for(var c=[],d=0,e=b.length;e>d;){var f=d++;c.push(verb.core.Vec.mul(a,b[f]))}return c},verb.core.Mat.mult=function(a,b){var c,d,e,f,g,h,i,j;c=a.length,d=b.length,e=b[0].length,f=new Array;for(var k=c-1,l=0,m=0;k>=0;){for(g=new Array,h=a[k],m=e-1;m>=0;){for(i=h[d-1]*b[d-1][m],l=d-2;l>=1;)j=l-1,i+=h[l]*b[l][m]+h[j]*b[j][m],l-=2;0==l&&(i+=h[0]*b[0][m]),g[m]=i,m--}f[k]=g,k--}return f},verb.core.Mat.add=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(verb.core.Vec.add(a[f],b[f]))}return c},verb.core.Mat.div=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(verb.core.Vec.div(a[f],b))}return c},verb.core.Mat.sub=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(verb.core.Vec.sub(a[f],b[f]))}return c},verb.core.Mat.dot=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(verb.core.Vec.dot(a[f],b))}return c},verb.core.Mat.identity=function(a){for(var b=verb.core.Vec.zeros2d(a,a),c=0;a>c;){var d=c++;b[d][d]=1}return b},verb.core.Mat.transpose=function(a){if(0==a.length)return[];for(var b=[],c=0,d=a[0].length;d>c;){var e=c++;b.push(function(b){for(var c,d=[],f=0,g=a.length;g>f;){var h=f++;d.push(a[h][e])}return c=d}(this))}return b},verb.core.Mat.solve=function(a,b){return verb.core.Mat.LUsolve(verb.core.Mat.LU(a),b)},verb.core.Mat.LUsolve=function(a,b){var c,d,e,f,g,h=a.LU,i=h.length,j=b.slice(),k=a.P;for(c=i-1;-1!=c;)j[c]=b[c],--c;for(c=0;i>c;){for(e=k[c],k[c]!=c&&(g=j[c],j[c]=j[e],j[e]=g),f=h[c],d=0;c>d;)j[c]-=j[d]*f[d],++d;++c}for(c=i-1;c>=0;){for(f=h[c],d=c+1;i>d;)j[c]-=j[d]*f[d],++d;j[c]/=f[c],--c}return j},verb.core.Mat.LU=function(a){for(var b,c,d,e,f,g,h,i,j,k=(Math.abs,[]),l=0,m=a.length;m>l;){var n=l++;k.push(a[n].slice())}a=k;var o=a.length,p=o-1,q=new Array;for(d=0;o>d;){for(h=d,g=a[d],j=Math.abs(g[d]),c=d+1;o>c;)e=Math.abs(a[c][d]),e>j&&(j=e,h=c),++c;for(q[d]=h,h!=d&&(a[d]=a[h],a[h]=g,g=a[d]),f=g[d],b=d+1;o>b;)a[b][d]/=f,++b;for(b=d+1;o>b;){for(i=a[b],c=d+1;p>c;)i[c]-=i[d]*g[c],++c,i[c]-=i[d]*g[c],++c;c==p&&(i[c]-=i[d]*g[c]),++b}++d}return new verb.core.LUDecomp(a,q)},verb.core.LUDecomp=function(a,b){this.LU=a,this.P=b},verb.core.LUDecomp.__name__=["verb","core","LUDecomp"],verb.core.Mesh=$hx_exports.core.Mesh=function(){},verb.core.Mesh.__name__=["verb","core","Mesh"],verb.core.Mesh.getTriangleNorm=function(a,b){var c=a[b[0]],d=a[b[1]],e=a[b[2]],f=verb.core.Vec.sub(d,c),g=verb.core.Vec.sub(e,c),h=verb.core.Vec.cross(f,g);return verb.core.Vec.mul(1/verb.core.Vec.norm(h),h)},verb.core.Mesh.makeMeshAabb=function(a,b){for(var c=new verb.core.BoundingBox,d=0;d<b.length;){var e=b[d];++d,c.add(a.points[a.faces[e][0]]),c.add(a.points[a.faces[e][1]]),c.add(a.points[a.faces[e][2]])}return c},verb.core.Mesh.sortTrianglesOnLongestAxis=function(a,b,c){for(var d=a.getLongestAxis(),e=new Array,f=0;f<c.length;){var g=c[f];++f;var h=verb.core.Mesh.getMinCoordOnAxis(b.points,b.faces[g],d);e.push(new verb.core.Pair(h,g))}e.sort(function(a,b){var c=a.item0,d=b.item0;return c==d?0:c>d?1:-1});for(var i=new Array,j=0,k=e.length;k>j;){var l=j++;i.push(e[l].item1)}return i},verb.core.Mesh.getMinCoordOnAxis=function(a,b,c){for(var d=Math.POSITIVE_INFINITY,e=0;3>e;){var f=e++,g=a[b[f]][c];d>g&&(d=g)}return d},verb.core.Mesh.getTriangleCentroid=function(a,b){for(var c=[0,0,0],d=0;3>d;)for(var e=d++,f=0;3>f;){var g=f++;c[g]+=a[b[e]][g]}for(var h=0;3>h;){var i=h++;c[i]/=3}return c},verb.core.Mesh.triangleUVFromPoint=function(a,b,c){var d=a.faces[b],e=a.points[d[0]],f=a.points[d[1]],g=a.points[d[2]],h=a.uvs[d[0]],i=a.uvs[d[1]],j=a.uvs[d[2]],k=verb.core.Vec.sub(e,c),l=verb.core.Vec.sub(f,c),m=verb.core.Vec.sub(g,c),n=verb.core.Vec.norm(verb.core.Vec.cross(verb.core.Vec.sub(e,f),verb.core.Vec.sub(e,g))),o=verb.core.Vec.norm(verb.core.Vec.cross(l,m))/n,p=verb.core.Vec.norm(verb.core.Vec.cross(m,k))/n,q=verb.core.Vec.norm(verb.core.Vec.cross(k,l))/n;return verb.core.Vec.add(verb.core.Vec.mul(o,h),verb.core.Vec.add(verb.core.Vec.mul(p,i),verb.core.Vec.mul(q,j)))},verb.core.MeshBoundingBoxTree=function(a,b){if(this._empty=!1,this._face=-1,null==b){for(var c=[],d=0,e=a.faces.length;e>d;){var f=d++;c.push(f)}b=c}if(this._boundingBox=verb.core.Mesh.makeMeshAabb(a,b),b.length<1)return void(this._empty=!0);if(b.length<2)return void(this._face=b[0]);var g=verb.core.Mesh.sortTrianglesOnLongestAxis(this._boundingBox,a,b),h=verb.core.ArrayExtensions.left(g),i=verb.core.ArrayExtensions.right(g);this._children=new verb.core.Pair(new verb.core.MeshBoundingBoxTree(a,h),new verb.core.MeshBoundingBoxTree(a,i))},verb.core.MeshBoundingBoxTree.__name__=["verb","core","MeshBoundingBoxTree"],verb.core.MeshBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.MeshBoundingBoxTree.prototype={split:function(){return this._children},boundingBox:function(){return this._boundingBox},"yield":function(){return this._face},indivisible:function(a){return null==this._children},empty:function(){return this._empty}},verb.core.MinimizationResult=function(a,b,c,d,e,f){this.solution=a,this.value=b,this.gradient=c,this.invHessian=d,this.iterations=e,this.message=f},verb.core.MinimizationResult.__name__=["verb","core","MinimizationResult"],verb.core.Numeric=function(){},verb.core.Numeric.__name__=["verb","core","Numeric"],verb.core.Numeric.numericalGradient=function(a,b){var c=b.length,d=a(b);if(d==Math.NaN)throw"gradient: f(x) is a NaN!";for(var e,f,g,h,i,j,k,l,m,n=b.slice(0),o=[],p=.001,q=0,r=0;c>r;)for(var s=r++,t=Math.max(1e-6*d,1e-8);;){if(++q,q>20)throw"Numerical gradient fails";if(n[s]=b[s]+t,e=a(n),n[s]=b[s]-t,f=a(n),n[s]=b[s],Math.isNaN(e)||Math.isNaN(f))t/=16;else{if(o[s]=(e-f)/(2*t),h=b[s]-t,i=b[s],j=b[s]+t,k=(e-d)/t,l=(d-f)/t,m=verb.core.Vec.max([Math.abs(o[s]),Math.abs(d),Math.abs(e),Math.abs(f),Math.abs(h),Math.abs(i),Math.abs(j),1e-8]),g=Math.min(verb.core.Vec.max([Math.abs(k-o[s]),Math.abs(l-o[s]),Math.abs(k-l)])/m,t/m),!(g>p))break;t/=16}}return o},verb.core.Numeric.uncmin=function(a,b,c,d,e){null==c&&(c=1e-8),null==d&&(d=function(b){return verb.core.Numeric.numericalGradient(a,b)}),null==e&&(e=1e3),b=b.slice(0);var f,g=b.length,h=a(b),i=h;if(Math.isNaN(h))throw"uncmin: f(x0) is a NaN!";c=Math.max(c,verb.core.Constants.EPSILON);var j,k,l,m,n,o,p,q,r,s=verb.core.Mat.identity(g),t=0,u=[],v="";for(k=d(b);e>t;){if(!verb.core.Vec.all(verb.core.Vec.finite(k))){v="Gradient has Infinity or NaN";break}if(j=verb.core.Vec.neg(verb.core.Mat.dot(s,k)),!verb.core.Vec.all(verb.core.Vec.finite(j))){v="Search direction has Infinity or NaN";break}if(r=verb.core.Vec.norm(j),c>r){v="Newton step smaller than tol";break}for(q=1,f=verb.core.Vec.dot(k,j),m=b;e>t&&!(c>q*r)&&(u=verb.core.Vec.mul(q,j),m=verb.core.Vec.add(b,u),i=a(m),i-h>=.1*q*f||Math.isNaN(i));)q*=.5,++t;if(c>q*r){v="Line search step size smaller than tol";break}if(t==e){v="maxit reached during line search";break}l=d(m),n=verb.core.Vec.sub(l,k),p=verb.core.Vec.dot(n,u),o=verb.core.Mat.dot(s,n),s=verb.core.Mat.sub(verb.core.Mat.add(s,verb.core.Mat.mul((p+verb.core.Vec.dot(n,o))/(p*p),verb.core.Numeric.tensor(u,u))),verb.core.Mat.div(verb.core.Mat.add(verb.core.Numeric.tensor(o,u),verb.core.Numeric.tensor(u,o)),p)),b=m,h=i,k=l,++t}return new verb.core.MinimizationResult(b,h,k,s,t,v)},verb.core.Numeric.tensor=function(a,b){for(var c,d,e=a.length,f=b.length,g=[],h=e-1;h>=0;){c=[],d=a[h];for(var i=f-1;i>=3;)c[i]=d*b[i],--i,c[i]=d*b[i],--i,c[i]=d*b[i],--i,c[i]=d*b[i],--i;for(;i>=0;)c[i]=d*b[i],--i;g[h]=c,h--}return g},verb.core.Pair=$hx_exports.core.Pair=function(a,b){this.item0=a,this.item1=b},verb.core.Pair.__name__=["verb","core","Pair"],verb.core.Ray=$hx_exports.core.Ray=function(a,b){this.origin=a,this.dir=b},verb.core.Ray.__name__=["verb","core","Ray"],verb.core.SurfaceBoundingBoxTree=function(a,b,c,d){null==b&&(b=!1),this._boundingBox=null,this._surface=a,null==c&&(c=verb.core.Vec.domain(a.knotsU)/16),null==d&&(d=verb.core.Vec.domain(a.knotsV)/16);var e=!1;if(e=b?verb.core.Vec.domain(this._surface.knotsV)>d:verb.core.Vec.domain(this._surface.knotsU)>c){var f,g;b?(f=verb.core.ArrayExtensions.first(this._surface.knotsV),g=verb.core.ArrayExtensions.last(this._surface.knotsV)):(f=verb.core.ArrayExtensions.first(this._surface.knotsU),g=verb.core.ArrayExtensions.last(this._surface.knotsU));var h=g-f,i=(f+g)/2+.1*h*Math.random(),j=verb.eval.Divide.surfaceSplit(this._surface,i,b);this._children=new verb.core.Pair(new verb.core.SurfaceBoundingBoxTree(j[0],!b,c,d),new verb.core.SurfaceBoundingBoxTree(j[1],!b,c,d))}},verb.core.SurfaceBoundingBoxTree.__name__=["verb","core","SurfaceBoundingBoxTree"],verb.core.SurfaceBoundingBoxTree.__interfaces__=[verb.core.IBoundingBoxTree],verb.core.SurfaceBoundingBoxTree.prototype={split:function(){return this._children},boundingBox:function(){if(null==this._boundingBox){this._boundingBox=new verb.core.BoundingBox;for(var a=0,b=this._surface.controlPoints;a<b.length;){var c=b[a];++a,this._boundingBox.addRange(verb.eval.Eval.dehomogenize1d(c))}}return this._boundingBox},"yield":function(){return this._surface},indivisible:function(a){return null==this._children},empty:function(){return!1}},verb.core.Trig=$hx_exports.core.Trig=function(){},verb.core.Trig.__name__=["verb","core","Trig"],verb.core.Trig.isPointInPlane=function(a,b,c){return Math.abs(verb.core.Vec.dot(verb.core.Vec.sub(a,b.o),b.n))<c},verb.core.Trig.distToSegment=function(a,b,c){var d=verb.core.Trig.segmentClosestPoint(b,a,c,0,1);return verb.core.Vec.dist(b,d.pt)},verb.core.Trig.rayClosestPoint=function(a,b,c){var d=verb.core.Vec.sub(a,b),e=verb.core.Vec.dot(d,c),f=verb.core.Vec.add(b,verb.core.Vec.mul(e,c));return f},verb.core.Trig.distToRay=function(a,b,c){var d=verb.core.Trig.rayClosestPoint(a,b,c),e=verb.core.Vec.sub(d,a);return verb.core.Vec.norm(e)},verb.core.Trig.threePointsAreFlat=function(a,b,c,d){var e=verb.core.Vec.sub(b,a),f=verb.core.Vec.sub(c,a),g=verb.core.Vec.cross(e,f),h=verb.core.Vec.dot(g,g);return d>h},verb.core.Trig.segmentClosestPoint=function(a,b,c,d,e){var f=verb.core.Vec.sub(c,b),g=verb.core.Vec.norm(f);if(g<verb.core.Constants.EPSILON)return{u:d,pt:b};var h=b,i=verb.core.Vec.mul(1/g,f),j=verb.core.Vec.sub(a,h),k=verb.core.Vec.dot(j,i);return 0>k?{u:d,pt:b}:k>g?{u:e,pt:c}:{u:d+(e-d)*k/g,pt:verb.core.Vec.add(h,verb.core.Vec.mul(k,i))}},verb.core.Vec=$hx_exports.core.Vec=function(){},verb.core.Vec.__name__=["verb","core","Vec"],verb.core.Vec.angleBetween=function(a,b){return Math.acos(verb.core.Vec.dot(a,b)/(verb.core.Vec.norm(a)*verb.core.Vec.norm(b)))},verb.core.Vec.positiveAngleBetween=function(a,b,c){var d=verb.core.Vec.cross(a,b),e=verb.core.Vec.norm(a),f=verb.core.Vec.norm(b),g=e*f,h=verb.core.Vec.dot(a,b),i=verb.core.Vec.norm(d)/g,j=h/g,k=Math.atan2(i,j),l=verb.core.Vec.dot(c,d);return Math.abs(l)<verb.core.Constants.EPSILON?k:l>0?k:-k},verb.core.Vec.signedAngleBetween=function(a,b,c){var d=verb.core.Vec.cross(a,b),e=verb.core.Vec.norm(a),f=verb.core.Vec.norm(b),g=e*f,h=verb.core.Vec.dot(a,b),i=verb.core.Vec.norm(d)/g,j=h/g,k=Math.atan2(i,j),l=verb.core.Vec.dot(c,d);return l>0?k:2*Math.PI-k},verb.core.Vec.angleBetweenNormalized2d=function(a,b){var c=a[0]*b[1]-a[1]*b[0];return Math.atan2(c,verb.core.Vec.dot(a,b))},verb.core.Vec.domain=function(a){return verb.core.ArrayExtensions.last(a)-verb.core.ArrayExtensions.first(a)},verb.core.Vec.range=function(a){for(var b=[],c=0,d=0;a>d;){d++;b.push(c),c+=1}return b},verb.core.Vec.span=function(a,b,c){if(null==c)return[];if(c<verb.core.Constants.EPSILON)return[];if(a>b&&c>0)return[];if(b>a&&0>c)return[];for(var d=[],e=a;b>=e;)d.push(e),e+=c;return d},verb.core.Vec.neg=function(a){return a.map(function(a){return-a})},verb.core.Vec.min=function(a){return Lambda.fold(a,function(a,b){return Math.min(a,b)},Math.POSITIVE_INFINITY)},verb.core.Vec.max=function(a){return Lambda.fold(a,function(a,b){return Math.max(a,b)},Math.NEGATIVE_INFINITY)},verb.core.Vec.all=function(a){return Lambda.fold(a,function(a,b){return b&&a},!0)},verb.core.Vec.finite=function(a){return a.map(function(a){return Math.isFinite(a)})},verb.core.Vec.onRay=function(a,b,c){return verb.core.Vec.add(a,verb.core.Vec.mul(c,b))},verb.core.Vec.lerp=function(a,b,c){return verb.core.Vec.add(verb.core.Vec.mul(a,b),verb.core.Vec.mul(1-a,c))},verb.core.Vec.normalized=function(a){return verb.core.Vec.div(a,verb.core.Vec.norm(a))},verb.core.Vec.cross=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]},verb.core.Vec.dist=function(a,b){return verb.core.Vec.norm(verb.core.Vec.sub(a,b))},verb.core.Vec.distSquared=function(a,b){return verb.core.Vec.normSquared(verb.core.Vec.sub(a,b))},verb.core.Vec.sum=function(a){return Lambda.fold(a,function(a,b){return b+a},0)},verb.core.Vec.addAll=function(a){var b=$iterator(a)();if(!b.hasNext())return null;var c=b.next().length;return Lambda.fold(a,function(a,b){return verb.core.Vec.add(b,a)},verb.core.Vec.rep(c,0))},verb.core.Vec.norm=function(a){var b=verb.core.Vec.normSquared(a);return 0!=b?Math.sqrt(b):b},verb.core.Vec.normSquared=function(a){return Lambda.fold(a,function(a,b){return b+a*a},0)},verb.core.Vec.rep=function(a,b){for(var c=[],d=0;a>d;){d++;c.push(b)}return c},verb.core.Vec.zeros1d=function(a){for(var b=[],c=0;a>c;){c++;b.push(0)}return b},verb.core.Vec.zeros2d=function(a,b){for(var c=[],d=0;a>d;){d++;c.push(verb.core.Vec.zeros1d(b))}return c},verb.core.Vec.zeros3d=function(a,b,c){for(var d=[],e=0;a>e;){e++;d.push(verb.core.Vec.zeros2d(b,c))}return d},verb.core.Vec.dot=function(a,b){for(var c=0,d=0,e=a.length;e>d;){var f=d++;c+=a[f]*b[f]}return c},verb.core.Vec.add=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(a[f]+b[f])}return c},verb.core.Vec.mul=function(a,b){for(var c=[],d=0,e=b.length;e>d;){var f=d++;c.push(a*b[f])}return c},verb.core.Vec.div=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(a[f]/b)}return c},verb.core.Vec.sub=function(a,b){for(var c=[],d=0,e=a.length;e>d;){var f=d++;c.push(a[f]-b[f])}return c},verb.core.Vec.isZero=function(a){for(var b=0,c=a.length;c>b;){var d=b++;if(Math.abs(a[d])>verb.core.Constants.TOLERANCE)return!1}return!0},verb.core.Vec.sortedSetUnion=function(a,b){for(var c=[],d=0,e=0;d<a.length||e<b.length;)if(d>=a.length)c.push(b[e]),e++;else if(e>=b.length)c.push(a[d]),d++;else{var f=a[d]-b[e];Math.abs(f)<verb.core.Constants.EPSILON?(c.push(a[d]),d++,e++):f>0?(c.push(b[e]),e++):(c.push(a[d]),d++)}return c},verb.core.Vec.sortedSetSub=function(a,b){for(var c=[],d=0,e=0;d<a.length;)e>=b.length?(c.push(a[d]),d++):Math.abs(a[d]-b[e])<verb.core.Constants.EPSILON?(d++,e++):(c.push(a[d]),d++);return c},verb.eval={},verb.eval.Analyze=$hx_exports.eval.Analyze=function(){},verb.eval.Analyze.__name__=["verb","eval","Analyze"],verb.eval.Analyze.knotMultiplicities=function(a){for(var b=[new verb.eval.KnotMultiplicity(a[0],0)],c=b[0],d=0;d<a.length;){var e=a[d];++d,Math.abs(e-c.knot)>verb.core.Constants.EPSILON&&(c=new verb.eval.KnotMultiplicity(e,0),b.push(c)),c.inc()}return b},verb.eval.Analyze.isRationalSurfaceClosed=function(a,b){null==b&&(b=!0);var c;c=b?a.controlPoints:verb.core.Mat.transpose(a.controlPoints);for(var d=0,e=c[0].length;e>d;){var f=d++,g=verb.core.Vec.dist(verb.core.ArrayExtensions.first(c)[f],verb.core.ArrayExtensions.last(c)[f])<verb.core.Constants.EPSILON;if(!g)return!1}return!0},verb.eval.Analyze.rationalSurfaceClosestPoint=function(a,b){var c=verb.eval.Analyze.rationalSurfaceClosestParam(a,b);return verb.eval.Eval.rationalSurfacePoint(a,c[0],c[1])},verb.eval.Analyze.rationalSurfaceClosestParam=function(a,b){for(var c,d,e,f=5,g=0,h=1e-4,i=5e-4,j=a.knotsU[0],k=verb.core.ArrayExtensions.last(a.knotsU),l=a.knotsV[0],m=verb.core.ArrayExtensions.last(a.knotsV),n=verb.eval.Analyze.isRationalSurfaceClosed(a),o=verb.eval.Analyze.isRationalSurfaceClosed(a,!1),p=verb.eval.Tess.rationalSurfaceAdaptive(a,new verb.core.AdaptiveRefinementOptions),q=Math.POSITIVE_INFINITY,r=0,s=p.points.length;s>r;){var t=r++,u=p.points[t],v=verb.core.Vec.normSquared(verb.core.Vec.sub(b,u));q>v&&(q=v,e=p.uvs[t])}for(var w=function(b){return verb.eval.Eval.rationalSurfaceDerivatives(a,b[0],b[1],2)},x=function(a,b,c){var d=b[1][0],e=b[0][1],f=b[2][0],g=b[0][2],h=b[1][1],i=b[1][1],j=verb.core.Vec.dot(d,c),k=verb.core.Vec.dot(e,c),l=[-j,-k],m=verb.core.Vec.dot(d,d)+verb.core.Vec.dot(f,c),n=verb.core.Vec.dot(d,e)+verb.core.Vec.dot(h,c),o=verb.core.Vec.dot(d,e)+verb.core.Vec.dot(i,c),p=verb.core.Vec.dot(e,e)+verb.core.Vec.dot(g,c),q=[[m,n],[o,p]],r=verb.core.Mat.solve(q,l);return verb.core.Vec.add(r,a)};f>g;){c=w(e),d=verb.core.Vec.sub(c[0][0],b);var y=verb.core.Vec.norm(d),z=verb.core.Vec.dot(c[1][0],d),A=verb.core.Vec.norm(c[1][0])*y,B=verb.core.Vec.dot(c[0][1],d),C=verb.core.Vec.norm(c[0][1])*y,D=z/A,E=B/C,F=h>y,G=i>D,H=i>E;if(F&&G&&H)return e;var I=x(e,c,d);I[0]<j?I=n?[k-(I[0]-j),I[1]]:[j+verb.core.Constants.EPSILON,I[1]]:I[0]>k&&(I=n?[j+(I[0]-k),I[1]]:[k-verb.core.Constants.EPSILON,I[1]]),I[1]<l?I=o?[I[0],m-(I[1]-l)]:[I[0],l+verb.core.Constants.EPSILON]:I[1]>m&&(I=o?[I[0],l+(I[0]-m)]:[I[0],m-verb.core.Constants.EPSILON]);var J=verb.core.Vec.norm(verb.core.Vec.mul(I[0]-e[0],c[1][0])),K=verb.core.Vec.norm(verb.core.Vec.mul(I[1]-e[1],c[0][1]));if(h>J+K)return e;e=I,g++}return e},verb.eval.Analyze.rationalCurveClosestPoint=function(a,b){return verb.eval.Eval.rationalCurvePoint(a,verb.eval.Analyze.rationalCurveClosestParam(a,b))},verb.eval.Analyze.rationalCurveClosestParam=function(a,b){for(var c=Math.POSITIVE_INFINITY,d=0,e=verb.eval.Tess.rationalCurveRegularSample(a,a.controlPoints.length*a.degree,!0),f=0,g=e.length-1;g>f;){var h=f++,i=e[h][0],j=e[h+1][0],k=e[h].slice(1),l=e[h+1].slice(1),m=verb.core.Trig.segmentClosestPoint(b,k,l,i,j),n=verb.core.Vec.norm(verb.core.Vec.sub(b,m.pt));c>n&&(c=n,d=m.u)}for(var o,p,q=5,r=0,s=1e-4,t=5e-4,u=a.knots[0],v=verb.core.ArrayExtensions.last(a.knots),w=verb.core.Vec.normSquared(verb.core.Vec.sub(a.controlPoints[0],verb.core.ArrayExtensions.last(a.controlPoints)))<verb.core.Constants.EPSILON,x=d,y=function(b){return verb.eval.Eval.rationalCurveDerivatives(a,b,2)},z=function(a,b,c){var d=verb.core.Vec.dot(b[1],c),e=verb.core.Vec.dot(b[2],c),f=verb.core.Vec.dot(b[1],b[1]),g=e+f;return a-d/g};q>r;){o=y(x),p=verb.core.Vec.sub(o[0],b);var A=verb.core.Vec.norm(p),B=verb.core.Vec.dot(o[1],p),C=verb.core.Vec.norm(o[1])*A,D=B/C,E=s>A,F=Math.abs(D)<t;if(E&&F)return x;var G=z(x,o,p);u>G?G=w?v-(G-u):u:G>v&&(G=w?u+(G-v):v);var H=verb.core.Vec.norm(verb.core.Vec.mul(G-x,o[1]));if(s>H)return x;x=G,r++}return x},verb.eval.Analyze.rationalCurveParamAtArcLength=function(a,b,c,d,e){if(null==c&&(c=.001),b<verb.core.Constants.EPSILON)return a.knots[0];var f;f=null!=d?d:verb.eval.Modify.decomposeCurveIntoBeziers(a);var g,h=0,i=(f[h],-verb.core.Constants.EPSILON);for(g=null!=e?e:[];b>i&&h<f.length;){if(h<g.length?g[h]=g[h]:g[h]=verb.eval.Analyze.rationalBezierCurveArcLength(a),i+=g[h],b<i+verb.core.Constants.EPSILON)return verb.eval.Analyze.rationalBezierCurveParamAtArcLength(a,b,c,g[h]);h++}return-1},verb.eval.Analyze.rationalBezierCurveParamAtArcLength=function(a,b,c,d){if(0>b)return a.knots[0];var e;if(e=null!=d?d:verb.eval.Analyze.rationalBezierCurveArcLength(a),b>e)return verb.core.ArrayExtensions.last(a.knots);var f,g=a.knots[0],h=0,i=verb.core.ArrayExtensions.last(a.knots),j=e,k=0,l=0;for(f=null!=c?c:2*verb.core.Constants.TOLERANCE;j-h>f;)k=(g+i)/2,l=verb.eval.Analyze.rationalBezierCurveArcLength(a,k),l>b?(i=k,j=l):(g=k,h=l);return(g+i)/2},verb.eval.Analyze.rationalCurveArcLength=function(a,b,c){null==c&&(c=16),b=null==b?verb.core.ArrayExtensions.last(a.knots):b;for(var d=verb.eval.Modify.decomposeCurveIntoBeziers(a),e=0,f=d[0],g=0;e<d.length&&f.knots[0]+verb.core.Constants.EPSILON<b;){var h=Math.min(verb.core.ArrayExtensions.last(f.knots),b);g+=verb.eval.Analyze.rationalBezierCurveArcLength(f,h,c),f=d[++e]}return g},verb.eval.Analyze.rationalBezierCurveArcLength=function(a,b,c){null==c&&(c=16);var d;d=null==b?verb.core.ArrayExtensions.last(a.knots):b;for(var e,f,g=(d-a.knots[0])/2,h=0,i=a.degree+c,j=0;i>j;){var k=j++;e=g*verb.eval.Analyze.Tvalues[i][k]+g+a.knots[0],f=verb.eval.Eval.rationalCurveDerivatives(a,e,1),h+=verb.eval.Analyze.Cvalues[i][k]*verb.core.Vec.norm(f[1])}return g*h},verb.eval.KnotMultiplicity=$hx_exports.eval.KnotMultiplicity=function(a,b){this.knot=a,this.mult=b},verb.eval.KnotMultiplicity.__name__=["verb","eval","KnotMultiplicity"],verb.eval.KnotMultiplicity.prototype={inc:function(){this.mult++}},verb.eval.Check=$hx_exports.eval.Check=function(){},verb.eval.Check.__name__=["verb","eval","Check"],verb.eval.Check.isValidKnotVector=function(a,b){if(0==a.length)return!1;if(a.length<2*(b+1))return!1;for(var c=verb.core.ArrayExtensions.first(a),d=0,e=b+1;e>d;){var f=d++;if(Math.abs(a[f]-c)>verb.core.Constants.EPSILON)return!1}c=verb.core.ArrayExtensions.last(a);for(var g=a.length-b-1,h=a.length;h>g;){var i=g++;if(Math.abs(a[i]-c)>verb.core.Constants.EPSILON)return!1}return verb.eval.Check.isNonDecreasing(a)},verb.eval.Check.isNonDecreasing=function(a){for(var b=verb.core.ArrayExtensions.first(a),c=0,d=a.length;d>c;){var e=c++;if(a[e]<b-verb.core.Constants.EPSILON)return!1;b=a[e]}return!0},verb.eval.Check.isValidNurbsCurveData=function(a){if(null==a.controlPoints)throw"Control points array cannot be null!";if(null==a.degree)throw"Degree cannot be null!";if(a.degree<1)throw"Degree must be greater than 1!";if(null==a.knots)throw"Knots cannot be null!";if(a.knots.length!=a.controlPoints.length+a.degree+1)throw"controlPoints.length + degree + 1 must equal knots.length!";if(!verb.eval.Check.isValidKnotVector(a.knots,a.degree))throw"Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!";return a},verb.eval.Check.isValidNurbsSurfaceData=function(a){if(null==a.controlPoints)throw"Control points array cannot be null!";if(null==a.degreeU)throw"DegreeU cannot be null!";if(null==a.degreeV)throw"DegreeV cannot be null!";if(a.degreeU<1)throw"DegreeU must be greater than 1!";if(a.degreeV<1)throw"DegreeV must be greater than 1!";if(null==a.knotsU)throw"KnotsU cannot be null!";if(null==a.knotsV)throw"KnotsV cannot be null!";if(a.knotsU.length!=a.controlPoints.length+a.degreeU+1)throw"controlPointsU.length + degreeU + 1 must equal knotsU.length!";if(a.knotsV.length!=a.controlPoints[0].length+a.degreeV+1)throw"controlPointsV.length + degreeV + 1 must equal knotsV.length!";if(!verb.eval.Check.isValidKnotVector(a.knotsU,a.degreeU)||!verb.eval.Check.isValidKnotVector(a.knotsV,a.degreeV))throw"Invalid knot vector format!  Should begin with degree + 1 repeats and end with degree + 1 repeats!";return a},verb.eval.Divide=$hx_exports.eval.Divide=function(){},verb.eval.Divide.__name__=["verb","eval","Divide"],verb.eval.Divide.surfaceSplit=function(a,b,c){null==c&&(c=!1);var d,e,f;c?(f=a.controlPoints,d=a.knotsV,e=a.degreeV):(f=verb.core.Mat.transpose(a.controlPoints),d=a.knotsU,e=a.degreeU);for(var g,h=[],i=0,j=e+1;j>i;){i++;h.push(b)}g=h;for(var k=new Array,l=new Array,m=verb.eval.Eval.knotSpan(e,b,d),n=null,o=0;o<f.length;){var p=f[o];++o,n=verb.eval.Modify.curveKnotRefine(new verb.core.NurbsCurveData(e,d,p),g),k.push(n.controlPoints.slice(0,m+1)),l.push(n.controlPoints.slice(m+1))}var q=n.knots.slice(0,m+e+2),r=n.knots.slice(m+1);return c?[new verb.core.NurbsSurfaceData(a.degreeU,e,a.knotsU.slice(),q,k),new verb.core.NurbsSurfaceData(a.degreeU,e,a.knotsU.slice(),r,l)]:(k=verb.core.Mat.transpose(k),l=verb.core.Mat.transpose(l),[new verb.core.NurbsSurfaceData(e,a.degreeV,q,a.knotsV.slice(),k),new verb.core.NurbsSurfaceData(e,a.degreeV,r,a.knotsV.slice(),l)])},verb.eval.Divide.curveSplit=function(a,b){for(var c,d=a.degree,e=(a.controlPoints,a.knots),f=[],g=0,h=d+1;h>g;){g++;f.push(b)}c=f;var i=verb.eval.Modify.curveKnotRefine(a,c),j=verb.eval.Eval.knotSpan(d,b,e),k=i.knots.slice(0,j+d+2),l=i.knots.slice(j+1),m=i.controlPoints.slice(0,j+1),n=i.controlPoints.slice(j+1);return[new verb.core.NurbsCurveData(d,k,m),new verb.core.NurbsCurveData(d,l,n)]},verb.eval.Divide.rationalCurveByEqualArcLength=function(a,b){var c=verb.eval.Analyze.rationalCurveArcLength(a),d=c/b;return verb.eval.Divide.rationalCurveByArcLength(a,d)},verb.eval.Divide.rationalCurveByArcLength=function(a,b){var c=verb.eval.Modify.decomposeCurveIntoBeziers(a),d=c.map(function(a){return verb.eval.Analyze.rationalBezierCurveArcLength(a)}),e=verb.core.Vec.sum(d),f=[new verb.core.CurveLengthSample(a.knots[0],0)];if(b>e)return f;for(var g,h=b,i=0,j=h,k=0,l=0;i<c.length;){for(k+=d[i];j<k+verb.core.Constants.EPSILON;)g=verb.eval.Analyze.rationalBezierCurveParamAtArcLength(c[i],j-l,verb.core.Constants.TOLERANCE,d[i]),f.push(new verb.core.CurveLengthSample(g,j)),j+=h;l+=d[i],i++}return f},verb.eval.Eval=$hx_exports.eval.Eval=function(){},verb.eval.Eval.__name__=["verb","eval","Eval"],verb.eval.Eval.rationalCurveTangent=function(a,b){var c=verb.eval.Eval.rationalCurveDerivatives(a,b,1);return c[1]},verb.eval.Eval.rationalSurfaceNormal=function(a,b,c){var d=verb.eval.Eval.rationalSurfaceDerivatives(a,b,c,1);return verb.core.Vec.cross(d[1][0],d[0][1])},verb.eval.Eval.rationalSurfaceDerivatives=function(a,b,c,d){null==d&&(d=1);for(var e=verb.eval.Eval.surfaceDerivatives(a,b,c,d),f=verb.eval.Eval.rational2d(e),g=verb.eval.Eval.weight2d(e),h=new Array,i=f[0][0].length,j=0,k=d+1;k>j;){var l=j++;h.push(new Array);for(var m=0,n=d-l+1;n>m;){for(var o=m++,p=f[l][o],q=1,r=o+1;r>q;){var s=q++;p=verb.core.Vec.sub(p,verb.core.Vec.mul(verb.core.Binomial.get(o,s)*g[0][s],h[l][o-s]))}for(var t=1,u=l+1;u>t;){var v=t++;p=verb.core.Vec.sub(p,verb.core.Vec.mul(verb.core.Binomial.get(l,v)*g[v][0],h[l-v][o]));for(var w=verb.core.Vec.zeros1d(i),x=1,y=o+1;y>x;){var z=x++;w=verb.core.Vec.add(w,verb.core.Vec.mul(verb.core.Binomial.get(o,z)*g[v][z],h[l-v][o-z]))}p=verb.core.Vec.sub(p,verb.core.Vec.mul(verb.core.Binomial.get(l,v),w))}h[l].push(verb.core.Vec.mul(1/g[0][0],p))}}return h},verb.eval.Eval.rationalSurfacePoint=function(a,b,c){return verb.eval.Eval.dehomogenize(verb.eval.Eval.surfacePoint(a,b,c));
},verb.eval.Eval.rationalCurveDerivatives=function(a,b,c){null==c&&(c=1);for(var d=verb.eval.Eval.curveDerivatives(a,b,c),e=verb.eval.Eval.rational1d(d),f=verb.eval.Eval.weight1d(d),g=[],h=0,i=c+1;i>h;){for(var j=h++,k=e[j],l=1,m=j+1;m>l;){var n=l++;k=verb.core.Vec.sub(k,verb.core.Vec.mul(verb.core.Binomial.get(j,n)*f[n],g[j-n]))}g.push(verb.core.Vec.mul(1/f[0],k))}return g},verb.eval.Eval.rationalCurvePoint=function(a,b){return verb.eval.Eval.dehomogenize(verb.eval.Eval.curvePoint(a,b))},verb.eval.Eval.surfaceDerivatives=function(a,b,c,d){var e=a.knotsU.length-a.degreeU-2,f=a.knotsV.length-a.degreeV-2;return verb.eval.Eval.surfaceDerivativesGivenNM(e,f,a,b,c,d)},verb.eval.Eval.surfaceDerivativesGivenNM=function(a,b,c,d,e,f){var g=c.degreeU,h=c.degreeV,i=c.controlPoints,j=c.knotsU,k=c.knotsV;if(!verb.eval.Eval.areValidRelations(g,i.length,j.length)||!verb.eval.Eval.areValidRelations(h,i[0].length,k.length))throw"Invalid relations between control points, knot vector, and n";var l,m=i[0][0].length;l=g>f?f:g;var n;n=h>f?f:h;for(var o=verb.core.Vec.zeros3d(l+1,n+1,m),p=verb.eval.Eval.knotSpanGivenN(a,g,d,j),q=verb.eval.Eval.knotSpanGivenN(b,h,e,k),r=verb.eval.Eval.derivativeBasisFunctionsGivenNI(p,d,g,a,j),s=verb.eval.Eval.derivativeBasisFunctionsGivenNI(q,e,h,b,k),t=verb.core.Vec.zeros2d(h+1,m),u=0,v=0,w=l+1;w>v;){for(var x=v++,y=0,z=h+1;z>y;){var A=y++;t[A]=verb.core.Vec.zeros1d(m);for(var B=0,C=g+1;C>B;){var D=B++;t[A]=verb.core.Vec.add(t[A],verb.core.Vec.mul(r[x][D],i[p-g+D][q-h+A]))}}var E=f-x;u=n>E?E:n;for(var F=0,G=u+1;G>F;){var H=F++;o[x][H]=verb.core.Vec.zeros1d(m);for(var I=0,J=h+1;J>I;){var K=I++;o[x][H]=verb.core.Vec.add(o[x][H],verb.core.Vec.mul(s[H][K],t[K]))}}}return o},verb.eval.Eval.surfacePoint=function(a,b,c){var d=a.knotsU.length-a.degreeU-2,e=a.knotsV.length-a.degreeV-2;return verb.eval.Eval.surfacePointGivenNM(d,e,a,b,c)},verb.eval.Eval.surfacePointGivenNM=function(a,b,c,d,e){var f=c.degreeU,g=c.degreeV,h=c.controlPoints,i=c.knotsU,j=c.knotsV;if(!verb.eval.Eval.areValidRelations(f,h.length,i.length)||!verb.eval.Eval.areValidRelations(g,h[0].length,j.length))throw"Invalid relations between control points, knot vector, and n";for(var k=h[0][0].length,l=verb.eval.Eval.knotSpanGivenN(a,f,d,i),m=verb.eval.Eval.knotSpanGivenN(b,g,e,j),n=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(l,d,f,i),o=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(m,e,g,j),p=l-f,q=m,r=verb.core.Vec.zeros1d(k),s=verb.core.Vec.zeros1d(k),t=0,u=g+1;u>t;){var v=t++;s=verb.core.Vec.zeros1d(k),q=m-g+v;for(var w=0,x=f+1;x>w;){var y=w++;s=verb.core.Vec.add(s,verb.core.Vec.mul(n[y],h[p+y][q]))}r=verb.core.Vec.add(r,verb.core.Vec.mul(o[v],s))}return r},verb.eval.Eval.curveDerivatives=function(a,b,c){var d=a.knots.length-a.degree-2;return verb.eval.Eval.curveDerivativesGivenN(d,a,b,c)},verb.eval.Eval.curveDerivativesGivenN=function(a,b,c,d){var e=b.degree,f=b.controlPoints,g=b.knots;if(!verb.eval.Eval.areValidRelations(e,f.length,g.length))throw"Invalid relations between control points, knot vector, and n";var h,i=f[0].length;h=e>d?d:e;for(var j=verb.core.Vec.zeros2d(h+1,i),k=verb.eval.Eval.knotSpanGivenN(a,e,c,g),l=verb.eval.Eval.derivativeBasisFunctionsGivenNI(k,c,e,h,g),m=0,n=h+1;n>m;)for(var o=m++,p=0,q=e+1;q>p;){var r=p++;j[o]=verb.core.Vec.add(j[o],verb.core.Vec.mul(l[o][r],f[k-e+r]))}return j},verb.eval.Eval.curvePoint=function(a,b){var c=a.knots.length-a.degree-2;return verb.eval.Eval.curvePointGivenN(c,a,b)},verb.eval.Eval.areValidRelations=function(a,b,c){return b+a+1-c==0},verb.eval.Eval.curvePointGivenN=function(a,b,c){var d=b.degree,e=b.controlPoints,f=b.knots;if(!verb.eval.Eval.areValidRelations(d,e.length,f.length))throw"Invalid relations between control points, knot Array, and n";for(var g=verb.eval.Eval.knotSpanGivenN(a,d,c,f),h=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(g,c,d,f),i=verb.core.Vec.zeros1d(e[0].length),j=0,k=d+1;k>j;){var l=j++;i=verb.core.Vec.add(i,verb.core.Vec.mul(h[l],e[g-d+l]))}return i},verb.eval.Eval.volumePoint=function(a,b,c,d){var e=a.knotsU.length-a.degreeU-2,f=a.knotsV.length-a.degreeV-2,g=a.knotsW.length-a.degreeW-2;return verb.eval.Eval.volumePointGivenNML(a,e,f,g,b,c,d)},verb.eval.Eval.volumePointGivenNML=function(a,b,c,d,e,f,g){if(!verb.eval.Eval.areValidRelations(a.degreeU,a.controlPoints.length,a.knotsU.length)||!verb.eval.Eval.areValidRelations(a.degreeV,a.controlPoints[0].length,a.knotsV.length)||!verb.eval.Eval.areValidRelations(a.degreeW,a.controlPoints[0][0].length,a.knotsW.length))throw"Invalid relations between control points and knot vector";for(var h=a.controlPoints,i=a.degreeU,j=a.degreeV,k=a.degreeW,l=a.knotsU,m=a.knotsV,n=a.knotsW,o=h[0][0][0].length,p=verb.eval.Eval.knotSpanGivenN(b,i,e,l),q=verb.eval.Eval.knotSpanGivenN(c,j,f,m),r=verb.eval.Eval.knotSpanGivenN(d,k,g,n),s=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(p,e,i,l),t=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(q,f,j,m),u=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(r,g,k,n),v=p-i,w=verb.core.Vec.zeros1d(o),x=verb.core.Vec.zeros1d(o),y=verb.core.Vec.zeros1d(o),z=0,A=k+1;A>z;){var B=z++;y=verb.core.Vec.zeros1d(o);for(var C=r-k+B,D=0,E=j+1;E>D;){var F=D++;x=verb.core.Vec.zeros1d(o);for(var G=q-j+F,H=0,I=i+1;I>H;){var J=H++;x=verb.core.Vec.add(x,verb.core.Vec.mul(s[J],h[v+J][G][C]))}y=verb.core.Vec.add(y,verb.core.Vec.mul(t[F],x))}w=verb.core.Vec.add(w,verb.core.Vec.mul(u[B],y))}return w},verb.eval.Eval.derivativeBasisFunctions=function(a,b,c){var d=verb.eval.Eval.knotSpan(b,a,c),e=c.length-1,f=e-b-1;return verb.eval.Eval.derivativeBasisFunctionsGivenNI(d,a,b,f,c)},verb.eval.Eval.derivativeBasisFunctionsGivenNI=function(a,b,c,d,e){var f=verb.core.Vec.zeros2d(c+1,c+1),g=verb.core.Vec.zeros1d(c+1),h=verb.core.Vec.zeros1d(c+1),i=0,j=0;f[0][0]=1;for(var k=1,l=c+1;l>k;){var m=k++;g[m]=b-e[a+1-m],h[m]=e[a+m]-b,i=0;for(var n=0;m>n;){var o=n++;f[m][o]=h[o+1]+g[m-o],j=f[o][m-1]/f[m][o],f[o][m]=i+h[o+1]*j,i=g[m-o]*j}f[m][m]=i}for(var p=verb.core.Vec.zeros2d(d+1,c+1),q=verb.core.Vec.zeros2d(2,c+1),r=0,s=1,t=0,u=0,v=0,w=0,x=0,y=0,z=c+1;z>y;){var A=y++;p[0][A]=f[A][c]}for(var B=0,C=c+1;C>B;){var D=B++;r=0,s=1,q[0][0]=1;for(var E=1,F=d+1;F>E;){var G=E++;t=0,u=D-G,v=c-G,D>=G&&(q[s][0]=q[r][0]/f[v+1][u],t=q[s][0]*f[u][v]),w=u>=-1?1:-u,x=v>=D-1?G-1:c-D;for(var H=w,I=x+1;I>H;){var J=H++;q[s][J]=(q[r][J]-q[r][J-1])/f[v+1][u+J],t+=q[s][J]*f[u+J][v]}v>=D&&(q[s][G]=-q[r][G-1]/f[v+1][D],t+=q[s][G]*f[D][v]),p[G][D]=t;var K=r;r=s,s=K}}for(var L=c,M=1,N=d+1;N>M;){for(var O=M++,P=0,Q=c+1;Q>P;){var R=P++;p[O][R]*=L}L*=c-O}return p},verb.eval.Eval.basisFunctions=function(a,b,c){var d=verb.eval.Eval.knotSpan(b,a,c);return verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(d,a,b,c)},verb.eval.Eval.basisFunctionsGivenKnotSpanIndex=function(a,b,c,d){var e=verb.core.Vec.zeros1d(c+1),f=verb.core.Vec.zeros1d(c+1),g=verb.core.Vec.zeros1d(c+1),h=0,i=0;e[0]=1;for(var j=1,k=c+1;k>j;){var l=j++;f[l]=b-d[a+1-l],g[l]=d[a+l]-b,h=0;for(var m=0;l>m;){var n=m++;i=e[n]/(g[n+1]+f[l-n]),e[n]=h+g[n+1]*i,h=f[l-n]*i}e[l]=h}return e},verb.eval.Eval.knotSpan=function(a,b,c){return verb.eval.Eval.knotSpanGivenN(c.length-a-2,a,b,c)},verb.eval.Eval.knotSpanGivenN=function(a,b,c,d){if(c>d[a+1]-verb.core.Constants.EPSILON)return a;if(c<d[b]+verb.core.Constants.EPSILON)return b;for(var e=b,f=a+1,g=Math.floor((e+f)/2);c<d[g]||c>=d[g+1];)c<d[g]?f=g:e=g,g=Math.floor((e+f)/2);return g},verb.eval.Eval.dehomogenize=function(a){for(var b=a.length,c=[],d=a[b-1],e=a.length-1,f=0;e>f;){var g=f++;c.push(a[g]/d)}return c},verb.eval.Eval.rational1d=function(a){var b=a[0].length-1;return a.map(function(a){return a.slice(0,b)})},verb.eval.Eval.rational2d=function(a){return a.map(verb.eval.Eval.rational1d)},verb.eval.Eval.weight1d=function(a){var b=a[0].length-1;return a.map(function(a){return a[b]})},verb.eval.Eval.weight2d=function(a){return a.map(verb.eval.Eval.weight1d)},verb.eval.Eval.dehomogenize1d=function(a){return a.map(verb.eval.Eval.dehomogenize)},verb.eval.Eval.dehomogenize2d=function(a){return a.map(verb.eval.Eval.dehomogenize1d)},verb.eval.Eval.homogenize1d=function(a,b){var c,d=a.length,e=a[0].length,f=new Array,g=0,h=new Array;c=null!=b?b:verb.core.Vec.rep(a.length,1);for(var i=0;d>i;){var j=i++,k=[];h=a[j],g=c[j];for(var l=0;e>l;){var m=l++;k.push(h[m]*g)}k.push(g),f.push(k)}return f},verb.eval.Eval.homogenize2d=function(a,b){var c,d=a.length,e=new Array;if(null!=b)c=b;else{for(var f=[],g=0;d>g;){g++;f.push(verb.core.Vec.rep(a[0].length,1))}c=f}for(var h=0;d>h;){var i=h++;e.push(verb.eval.Eval.homogenize1d(a[i],c[i]))}return e},verb.eval.MarchStepState={__ename__:!0,__constructs__:["OutOfBounds","InsideDomain","AtBoundary","CompleteLoop","CoincidentStartPoint"]},verb.eval.MarchStepState.OutOfBounds=["OutOfBounds",0],verb.eval.MarchStepState.OutOfBounds.toString=$estr,verb.eval.MarchStepState.OutOfBounds.__enum__=verb.eval.MarchStepState,verb.eval.MarchStepState.InsideDomain=["InsideDomain",1],verb.eval.MarchStepState.InsideDomain.toString=$estr,verb.eval.MarchStepState.InsideDomain.__enum__=verb.eval.MarchStepState,verb.eval.MarchStepState.AtBoundary=["AtBoundary",2],verb.eval.MarchStepState.AtBoundary.toString=$estr,verb.eval.MarchStepState.AtBoundary.__enum__=verb.eval.MarchStepState,verb.eval.MarchStepState.CompleteLoop=["CompleteLoop",3],verb.eval.MarchStepState.CompleteLoop.toString=$estr,verb.eval.MarchStepState.CompleteLoop.__enum__=verb.eval.MarchStepState,verb.eval.MarchStepState.CoincidentStartPoint=["CoincidentStartPoint",4],verb.eval.MarchStepState.CoincidentStartPoint.toString=$estr,verb.eval.MarchStepState.CoincidentStartPoint.__enum__=verb.eval.MarchStepState,verb.eval.MarchStep=function(a,b,c,d,e,f,g,h,i){this.stepCount=0,this.step=a,this.olduv0=b,this.olduv1=c,this.uv0=d,this.uv1=e,this.oldpoint=f,this.point=g,this.state=h,this.stepCount=i},verb.eval.MarchStep.__name__=["verb","eval","MarchStep"],verb.eval.MarchStep.outOfBounds=function(){return new verb.eval.MarchStep(null,null,null,null,null,null,null,verb.eval.MarchStepState.OutOfBounds,0)},verb.eval.MarchStep.init=function(a){return new verb.eval.MarchStep(null,null,null,a.uv0,a.uv1,null,a.point,verb.eval.MarchStepState.InsideDomain,0)},verb.eval.ExpIntersect=$hx_exports.eval.ExpIntersect=function(){},verb.eval.ExpIntersect.__name__=["verb","eval","ExpIntersect"],verb.eval.ExpIntersect.outsideDomain=function(a,b){var c=b[0],d=b[1];return c<verb.core.ArrayExtensions.first(a.knotsU)||d<verb.core.ArrayExtensions.first(a.knotsV)||c>verb.core.ArrayExtensions.last(a.knotsU)||d>verb.core.ArrayExtensions.last(a.knotsV)},verb.eval.ExpIntersect.clampToDomain=function(a,b){var c=b[0],d=b[1];return c<verb.core.ArrayExtensions.first(a.knotsU)&&(c=verb.core.ArrayExtensions.first(a.knotsU)),c>verb.core.ArrayExtensions.last(a.knotsU)&&(c=verb.core.ArrayExtensions.last(a.knotsU)),d<verb.core.ArrayExtensions.first(a.knotsV)&&(d=verb.core.ArrayExtensions.first(a.knotsV)),d>verb.core.ArrayExtensions.last(a.knotsV)&&(c=verb.core.ArrayExtensions.last(a.knotsV)),[c,d]},verb.eval.ExpIntersect.clampStep=function(a,b,c){var d=b[0],e=b[1],f=d+c[0];f>verb.core.ArrayExtensions.last(a.knotsU)+verb.core.Constants.EPSILON?c=verb.core.Vec.mul((verb.core.ArrayExtensions.last(a.knotsU)-d)/c[0],c):f<verb.core.ArrayExtensions.first(a.knotsU)-verb.core.Constants.EPSILON&&(c=verb.core.Vec.mul((verb.core.ArrayExtensions.first(a.knotsU)-d)/c[0],c));var g=e+c[1];return g>verb.core.ArrayExtensions.last(a.knotsV)+verb.core.Constants.EPSILON?c=verb.core.Vec.mul((verb.core.ArrayExtensions.last(a.knotsV)-e)/c[1],c):g<verb.core.ArrayExtensions.first(a.knotsV)-verb.core.Constants.EPSILON&&(c=verb.core.Vec.mul((verb.core.ArrayExtensions.first(a.knotsV)-e)/c[1],c)),c},verb.eval.ExpIntersect.march=function(a,b,c,d,e,f){var g=e[d],h=c.uv0,i=c.uv1,j=verb.eval.Eval.rationalSurfaceDerivatives(a,h[0],h[1],1),k=verb.eval.Eval.rationalSurfaceDerivatives(b,i[0],i[1],1),l=j[0][0],m=k[0][0],n=j[1][0],o=j[0][1],p=k[1][0],q=k[0][1],r=verb.core.Vec.cross(n,o),s=verb.core.Vec.cross(p,q),t=verb.core.Vec.normalized(verb.core.Vec.cross(r,s)),u=verb.eval.ExpIntersect.INIT_STEP_LENGTH;if(null!=c.oldpoint){var v=Math.acos(verb.core.Vec.dot(verb.core.Vec.normalized(c.step),t));if(Math.abs(v)<verb.core.Constants.EPSILON)u=verb.eval.ExpIntersect.LINEAR_STEP_LENGTH;else{var w=verb.core.Vec.dist(c.oldpoint,c.point)/Math.acos(verb.core.Vec.dot(verb.core.Vec.normalized(c.step),t)),x=2*Math.acos(1-4*f/w);u=w*Math.tan(x)}}var y=verb.core.Vec.mul(u,t),z=verb.core.Vec.add(c.point,y),A=verb.core.Vec.sub(z,l),B=verb.core.Vec.sub(z,m),C=verb.core.Vec.cross(n,r),D=verb.core.Vec.cross(o,r),E=verb.core.Vec.cross(p,s),F=verb.core.Vec.cross(q,s),G=verb.core.Vec.dot(D,A)/verb.core.Vec.dot(D,n),H=verb.core.Vec.dot(C,A)/verb.core.Vec.dot(C,o),I=verb.core.Vec.dot(F,B)/verb.core.Vec.dot(F,p),J=verb.core.Vec.dot(E,B)/verb.core.Vec.dot(E,q),K=[G,H],L=[I,J],M=verb.core.Vec.add(h,K),N=verb.core.Vec.add(i,L),O=verb.eval.MarchStepState.InsideDomain;if(verb.eval.ExpIntersect.outsideDomain(a,M)){O=verb.eval.MarchStepState.AtBoundary;var P=verb.core.Vec.norm(K);K=verb.eval.ExpIntersect.clampStep(a,h,K),L=verb.core.Vec.mul(verb.core.Vec.norm(K)/P,L)}if(verb.eval.ExpIntersect.outsideDomain(b,N)){O=verb.eval.MarchStepState.AtBoundary;var Q=verb.core.Vec.norm(L);L=verb.eval.ExpIntersect.clampStep(b,i,L),K=verb.core.Vec.mul(verb.core.Vec.norm(L)/Q,K)}M=verb.core.Vec.add(h,K),N=verb.core.Vec.add(i,L);var R=verb.eval.Intersect.surfacesAtPointWithEstimate(a,b,M,N,f);return c.stepCount>5&&null!=c.olduv0&&verb.core.Trig.distToSegment(c.point,g.point,R.point)<10*f?new verb.eval.MarchStep(y,c.uv0,c.uv1,g.uv0,g.uv1,c.point,g.point,verb.eval.MarchStepState.CompleteLoop,c.stepCount+1):(c.stepCount>5&&verb.eval.ExpIntersect.isCoincidentWithStartPoint(R.point,d,e,10*f)&&(O=verb.eval.MarchStepState.CoincidentStartPoint),new verb.eval.MarchStep(y,c.uv0,c.uv1,R.uv0,R.uv1,c.point,R.point,O,c.stepCount+1))},verb.eval.ExpIntersect.isCoincidentWithStartPoint=function(a,b,c,d){if(0==b)return!1;for(var e=0;b>e;){var f=e++,g=verb.core.Vec.distSquared(c[f].point,c[b].point);if(d>g)return haxe.Log.trace("Coincident start point!",{fileName:"ExpIntersect.hx",lineNumber:257,className:"verb.eval.ExpIntersect",methodName:"isCoincidentWithStartPoint"}),!0}return!1},verb.eval.ExpIntersect.completeMarch=function(a,b,c,d,e){var f=d[c],g=verb.eval.ExpIntersect.march(a,b,verb.eval.MarchStep.init(f),c,d,e);if(g.state==verb.eval.MarchStepState.AtBoundary||g.state==verb.eval.MarchStepState.CoincidentStartPoint)return null;var h=[];for(h.push(f);g.state!=verb.eval.MarchStepState.CoincidentStartPoint&&g.state!=verb.eval.MarchStepState.AtBoundary&&g.state!=verb.eval.MarchStepState.CompleteLoop;){if(h.push(new verb.core.SurfaceSurfaceIntersectionPoint(g.uv0,g.uv1,g.point,-1)),g.state==verb.eval.MarchStepState.CoincidentStartPoint)return null;g=verb.eval.ExpIntersect.march(a,b,g,c,d,e)}return h.push(new verb.core.SurfaceSurfaceIntersectionPoint(g.uv0,g.uv1,g.point,-1)),h},verb.eval.ExpIntersect.surfaces=function(a,b,c){for(var d=[],e=verb.eval.ExpIntersect.intersectBoundaryCurves(a,b,c),f=verb.eval.ExpIntersect.approxInnerCriticalPts(a,b),g=verb.eval.ExpIntersect.refineInnerCriticalPts(a,b,f,c),h=!0,i=0;i<g.length;){var j=g[i];++i;var k=verb.eval.Intersect.curveAndSurface(verb.eval.Make.surfaceIsocurve(a,j.item0[0],!1),b);if(0!=k.length&&h){h=!1;var l=new verb.core.SurfaceSurfaceIntersectionPoint([j.item0[0],k[0].u],k[0].uv,k[0].curvePoint,-1);e.push(l)}}for(var m=0;m<e.length;){haxe.Log.trace("starting at",{fileName:"ExpIntersect.hx",lineNumber:330,className:"verb.eval.ExpIntersect",methodName:"surfaces",customParams:[e[m].point]});var n=verb.eval.ExpIntersect.completeMarch(a,b,m,e,c);if(null!=n){d.push(n);var o=verb.core.ArrayExtensions.last(n);e.splice(m,0,o),haxe.Log.trace("inserting",{fileName:"ExpIntersect.hx",lineNumber:338,className:"verb.eval.ExpIntersect",methodName:"surfaces",customParams:[verb.core.ArrayExtensions.last(n).point]}),m+=2}m++}for(var p=[],q=0;q<d.length;){var r=d[q];++q,p.push(verb.eval.Make.rationalInterpCurve(r.map(function(a){return a.point})))}return p},verb.eval.ExpIntersect.refineInnerCriticalPts=function(a,b,c,d){return c.map(function(c){return verb.eval.ExpIntersect.refineCriticalPt(a,b,c,d)})},verb.eval.ExpIntersect.refineCriticalPt=function(a,b,c,d){var e=function(c){var d=verb.eval.Eval.rationalSurfaceDerivatives(a,c[0],c[1],1),e=verb.eval.Eval.rationalSurfaceDerivatives(b,c[2],c[3],1),f=verb.core.Vec.normalized(verb.core.Vec.cross(d[1][0],d[0][1])),g=verb.core.Vec.normalized(verb.core.Vec.cross(e[1][0],e[0][1])),h=verb.core.Vec.sub(d[0][0],e[0][0]),i=verb.core.Vec.normSquared(h),j=verb.core.Vec.dot(h,g),k=verb.core.Vec.dot(f,g);return i-j*j+1-k*k},f=[c.item0[0],c.item0[1],c.item1[0],c.item1[1]],g=verb.core.Numeric.uncmin(e,f,d),h=g.solution;return new verb.core.Pair([h[0],h[1]],[h[2],h[3]])},verb.eval.ExpIntersect.verifyInnerCriticalPts=function(a,b,c){return null},verb.eval.ExpIntersect.boundingBoxLeaves=function(a){if(a.indivisible(0))return[a["yield"]()];var b=a.split();return verb.eval.ExpIntersect.boundingBoxLeaves(b.item0).concat(verb.eval.ExpIntersect.boundingBoxLeaves(b.item1))},verb.eval.ExpIntersect.approxInnerCriticalPts=function(a,b){for(var c=new verb.core.LazySurfaceBoundingBoxTree(a,!1,.6,.6),d=new verb.core.LazySurfaceBoundingBoxTree(b,!1,.6,.6),e=verb.eval.Intersect.boundingBoxTrees(c,d,0),f=4,g=[],h=0;h<e.length;){var i=e[h];++h;for(var j=verb.eval.ExpIntersect.approxSurfaceDelPhiField(i.item0,i.item1,f,f),k=j.delphi,l=j.uvs0,m=j.uvs1,n=1,o=k.length;o>n;)for(var p=n++,q=1,r=k[p].length;r>q;){var s=q++,t=verb.eval.ExpIntersect.approxRotationNumber([k[p][s-1],k[p][s],k[p-1][s],k[p-1][s-1]]);if(0!=t){var u=(l[p][s][1]+l[p][s-1][1])/2,v=(l[p][s][0]+l[p-1][s][0])/2,w=(m[p][s][1]+m[p][s-1][1])/2,x=(m[p][s][0]+m[p-1][s][0])/2;g.push(new verb.core.Pair([u,v],[w,x]))}}}return g},verb.eval.ExpIntersect.approxRotationNumber=function(a){for(var b=0,c=a.length,d=1,e=c+1;e>d;){var f=d++,g=verb.core.Vec.angleBetweenNormalized2d(a[f-1],a[f%c]);b+=Math.abs(g)}return Math.floor(Math.abs(b/(2*Math.PI)))},verb.eval.ExpIntersect.approxSurfaceDelPhiField=function(a,b,c,d){for(var e=verb.eval.ExpIntersect.sampleSurfaceRegular(a,c,d),f=verb.eval.ExpIntersect.sampleSurfaceRegular(b,c,d),g=[],h=0,i=e.uvs.length;i>h;){var j=h++,k=[];g.push(k);for(var l=0,m=e.uvs[j].length;m>l;){for(var n=l++,o=Math.POSITIVE_INFINITY,p=[Math.POSITIVE_INFINITY,Math.POSITIVE_INFINITY],q=0,r=f.uvs.length;r>q;)for(var s=q++,t=0,u=f.uvs[s].length;u>t;){var v=t++,w=verb.core.Vec.distSquared(e.points[j][n],e.points[s][v]);o>w&&(o=w,p=e.uvs[s][v])}k.push(p)}}for(var x=[],y=0,z=g.length;z>y;){var A=y++,B=[];x.push(B);for(var C=0,D=g[A].length;D>C;){var E=C++,F=e.uvs[A][E],G=g[A][E],H=verb.eval.Eval.rationalSurfaceDerivatives(a,F[0],F[1]),I=verb.eval.Eval.rationalSurfaceDerivatives(b,G[0],G[1]),J=verb.core.Vec.normalized(verb.core.Vec.cross(I[1][0],I[0][1])),K=H[1][0],L=H[0][1],M=verb.core.Vec.normalized([verb.core.Vec.dot(J,K),verb.core.Vec.dot(J,L)]);B.push(M)}}return{uvs0:e.uvs,uvs1:g,delphi:x}},verb.eval.ExpIntersect.sampleSurfaceRegular=function(a,b,c){1>b&&(b=1),1>c&&(c=1);for(var d=(a.degreeU,a.degreeV,a.controlPoints,a.knotsU),e=a.knotsV,f=.005,g=verb.core.ArrayExtensions.last(d)-verb.core.ArrayExtensions.first(d)-2*f,h=verb.core.ArrayExtensions.last(e)-verb.core.ArrayExtensions.first(e)-2*f,i=verb.core.ArrayExtensions.first(d)+f,j=verb.core.ArrayExtensions.first(e)+f,k=g/b,l=h/c,m=[],n=[],o=0,p=b+1;p>o;){var q=o++,r=[];n.push(r);var s=[];m.push(s);for(var t=i+q*k,u=0,v=c+1;v>u;){var w=u++,x=j+w*l;r.push([t,x]),s.push(verb.eval.Eval.rationalSurfacePoint(a,t,x))}}return{uvs:n,points:m}},verb.eval.ExpIntersect.intersectBoundaryCurves=function(a,b,c){for(var d=verb.eval.Make.surfaceBoundaryCurves(a),e=verb.eval.Make.surfaceBoundaryCurves(b),f=[],g=0,h=d.length;h>g;)for(var i=g++,j=d[i],k=verb.eval.Intersect.curveAndSurface(j,b,c),l=0;l<k.length;){var m=k[l];++l;var n;switch(i){case 0:n=[verb.core.ArrayExtensions.first(a.knotsU),m.u];break;case 1:n=[verb.core.ArrayExtensions.last(a.knotsU),m.u];break;case 2:n=[m.u,verb.core.ArrayExtensions.first(a.knotsV)];break;default:n=[m.u,verb.core.ArrayExtensions.last(a.knotsV)]}var o=verb.core.Vec.dist(m.curvePoint,m.surfacePoint);f.push(new verb.core.SurfaceSurfaceIntersectionPoint(n,m.uv,m.curvePoint,o))}for(var p=0,q=e.length;q>p;)for(var r=p++,s=e[r],t=verb.eval.Intersect.curveAndSurface(s,a,c),u=0;u<t.length;){var v=t[u];++u;var w;switch(r){case 0:w=[verb.core.ArrayExtensions.first(b.knotsU),v.u];break;case 1:w=[verb.core.ArrayExtensions.last(b.knotsU),v.u];break;case 2:w=[v.u,verb.core.ArrayExtensions.first(b.knotsV)];break;default:w=[v.u,verb.core.ArrayExtensions.last(b.knotsV)]}var x=verb.core.Vec.dist(v.curvePoint,v.surfacePoint);f.push(new verb.core.SurfaceSurfaceIntersectionPoint(v.uv,w,v.curvePoint,x))}return verb.core.ArrayExtensions.unique(f,function(a,b){return Math.abs(a.uv0[0]-b.uv0[0])<c&&Math.abs(a.uv0[1]-b.uv0[1])<c})},verb.eval.Intersect=$hx_exports.eval.Intersect=function(){},verb.eval.Intersect.__name__=["verb","eval","Intersect"],verb.eval.Intersect.meshSlices=function(a,b,c,d){for(var e=new verb.core.MeshBoundingBoxTree(a),f=e.boundingBox(),g=f.min[0],h=f.min[1],i=f.max[0],j=f.max[1],k=verb.core.Vec.span(b,c,d),l=[],m=0;m<k.length;){var n=k[m];++m;var o=[[g,h,n],[i,h,n],[i,j,n],[g,j,n]],p=[[0,0],[1,0],[1,1],[0,1]],q=[[0,1,2],[0,2,3]],r=new verb.core.MeshData(q,o,null,p);l.push(verb.eval.Intersect.meshes(a,r,e)),n+=1}return l},verb.eval.Intersect.surfaces=function(a,b,c){var d=verb.eval.Tess.rationalSurfaceAdaptive(a),e=verb.eval.Tess.rationalSurfaceAdaptive(b),f=verb.eval.Intersect.meshes(d,e),g=f.map(function(d){return d.map(function(d){return verb.eval.Intersect.surfacesAtPointWithEstimate(a,b,d.uv0,d.uv1,c)})});return g.map(function(a){return verb.eval.Make.rationalInterpCurve(a.map(function(a){return a.point}),3)})},verb.eval.Intersect.surfacesAtPointWithEstimate=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s=5,t=0;do{if(f=verb.eval.Eval.rationalSurfaceDerivatives(a,c[0],c[1],1),g=f[0][0],i=f[1][0],j=f[0][1],h=verb.core.Vec.normalized(verb.core.Vec.cross(i,j)),k=verb.core.Vec.dot(h,g),l=verb.eval.Eval.rationalSurfaceDerivatives(b,d[0],d[1],1),m=l[0][0],o=l[1][0],p=l[0][1],n=verb.core.Vec.normalized(verb.core.Vec.cross(o,p)),q=verb.core.Vec.dot(n,m),r=verb.core.Vec.distSquared(g,m),e*e>r)break;var u=verb.core.Vec.normalized(verb.core.Vec.cross(h,n)),v=verb.core.Vec.dot(u,g),w=verb.eval.Intersect.threePlanes(h,k,n,q,u,v);if(null==w)throw"panic!";var x=verb.core.Vec.sub(w,g),y=verb.core.Vec.sub(w,m),z=verb.core.Vec.cross(i,h),A=verb.core.Vec.cross(j,h),B=verb.core.Vec.cross(o,n),C=verb.core.Vec.cross(p,n),D=verb.core.Vec.dot(A,x)/verb.core.Vec.dot(A,i),E=verb.core.Vec.dot(z,x)/verb.core.Vec.dot(z,j),F=verb.core.Vec.dot(C,y)/verb.core.Vec.dot(C,o),G=verb.core.Vec.dot(B,y)/verb.core.Vec.dot(B,p);c=verb.core.Vec.add([D,E],c),d=verb.core.Vec.add([F,G],d),t++}while(s>t);return new verb.core.SurfaceSurfaceIntersectionPoint(c,d,g,r)},verb.eval.Intersect.meshes=function(a,b,c,d){null==c&&(c=new verb.core.LazyMeshBoundingBoxTree(a)),null==d&&(d=new verb.core.LazyMeshBoundingBoxTree(b));var e=verb.eval.Intersect.boundingBoxTrees(c,d,0),f=verb.core.ArrayExtensions.unique(e.map(function(c){return verb.eval.Intersect.triangles(a,c.item0,b,c.item1)}).filter(function(a){return null!=a}).filter(function(a){return verb.core.Vec.distSquared(a.min.point,a.max.point)>verb.core.Constants.EPSILON}),function(a,b){var c=verb.core.Vec.sub(a.min.uv0,b.min.uv0),d=verb.core.Vec.dot(c,c),e=verb.core.Vec.sub(a.max.uv0,b.max.uv0),f=verb.core.Vec.dot(e,e),g=verb.core.Vec.sub(a.min.uv0,b.max.uv0),h=verb.core.Vec.dot(g,g),i=verb.core.Vec.sub(a.max.uv0,b.min.uv0),j=verb.core.Vec.dot(i,i);return d<verb.core.Constants.EPSILON&&f<verb.core.Constants.EPSILON||h<verb.core.Constants.EPSILON&&j<verb.core.Constants.EPSILON});return verb.eval.Intersect.makeMeshIntersectionPolylines(f)},verb.eval.Intersect.makeMeshIntersectionPolylines=function(a){if(0==a.length)return[];for(var b=0;b<a.length;){var c=a[b];++b,c.max.opp=c.min,c.min.opp=c.max}for(var d=verb.eval.Intersect.kdTreeFromSegments(a),e=[],f=0;f<a.length;){var g=a[f];++f,e.push(g.min),e.push(g.max)}for(var h=0;h<e.length;){var i=e[h];if(++h,null==i.adj){var j=verb.eval.Intersect.lookupAdjacentSegment(i,d,a.length);null!=j&&null==j.adj&&(i.adj=j,j.adj=i)}}var k=e.filter(function(a){return null==a.adj});0==k.length&&(k=e);for(var l=[],m=0,n=!1;0!=k.length;){var o=k.pop();if(!o.visited){for(var p=[],q=o;null!=q&&!q.visited&&(q.visited=!0,q.opp.visited=!0,p.push(q),m+=2,q=q.opp.adj,q!=o););p.length>0&&(p.push(p[p.length-1].opp),l.push(p))}if(0==k.length&&e.length>0&&(n||m<e.length)){n=!0;var r=e.pop();k.push(r)}}return l},verb.eval.Intersect.kdTreeFromSegments=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c,b.push(new verb.core.KdPoint(d.min.point,d.min)),b.push(new verb.core.KdPoint(d.max.point,d.max))}return new verb.core.KdTree(b,verb.core.Vec.distSquared)},verb.eval.Intersect.lookupAdjacentSegment=function(a,b,c){var d=b.nearest(a.point,c,verb.core.Constants.EPSILON).filter(function(b){return a!=b.item0.obj}).map(function(a){return a.item0.obj});return 1==d.length?d[0]:null},verb.eval.Intersect.curveAndSurface=function(a,b,c,d,e){null==c&&(c=.001),d=null!=d?d:new verb.core.LazyCurveBoundingBoxTree(a),e=null!=e?e:new verb.core.LazySurfaceBoundingBoxTree(b);var f=verb.eval.Intersect.boundingBoxTrees(d,e,c);return verb.core.ArrayExtensions.unique(f.map(function(a){var b=a.item0,d=a.item1,e=verb.core.ArrayExtensions.first(b.knots),f=verb.core.ArrayExtensions.last(b.knots),g=(e+f)/2,h=verb.core.ArrayExtensions.first(d.knotsU),i=verb.core.ArrayExtensions.last(d.knotsU),j=verb.core.ArrayExtensions.first(d.knotsV),k=verb.core.ArrayExtensions.last(d.knotsV),l=[(h+i)/2,(j+k)/2];return verb.eval.Intersect.curveAndSurfaceWithEstimate(b,d,[g].concat(l),c)}).filter(function(a){return verb.core.Vec.distSquared(a.curvePoint,a.surfacePoint)<c*c}),function(a,b){return Math.abs(a.u-b.u)<.5*c})},verb.eval.Intersect.curveAndSurfaceWithEstimate=function(a,b,c,d){null==d&&(d=.001);var e=function(c){var d=verb.eval.Eval.rationalCurvePoint(a,c[0]),e=verb.eval.Eval.rationalSurfacePoint(b,c[1],c[2]),f=verb.core.Vec.sub(d,e);return verb.core.Vec.dot(f,f)},f=function(c){var d=verb.eval.Eval.rationalCurveDerivatives(a,c[0],1),e=verb.eval.Eval.rationalSurfaceDerivatives(b,c[1],c[2],1),f=verb.core.Vec.sub(e[0][0],d[0]),g=verb.core.Vec.mul(-1,d[1]),h=e[1][0],i=e[0][1];return[2*verb.core.Vec.dot(g,f),2*verb.core.Vec.dot(h,f),2*verb.core.Vec.dot(i,f)]},g=verb.core.Numeric.uncmin(e,c,d*d,f),h=g.solution;return new verb.core.CurveSurfaceIntersection(h[0],[h[1],h[2]],verb.eval.Eval.rationalCurvePoint(a,h[0]),verb.eval.Eval.rationalSurfacePoint(b,h[1],h[2]))},verb.eval.Intersect.polylineAndMesh=function(a,b,c){for(var d=verb.eval.Intersect.boundingBoxTrees(new verb.core.LazyPolylineBoundingBoxTree(a),new verb.core.LazyMeshBoundingBoxTree(b),c),e=[],f=0;f<d.length;){var g=d[f];++f;var h=g.item0,i=g.item1,j=verb.eval.Intersect.segmentWithTriangle(a.points[h],a.points[h+1],b.points,b.faces[i]);if(null!=j){var k=j.point,l=verb.core.Vec.lerp(j.p,[a.params[h]],[a.params[h+1]])[0],m=verb.core.Mesh.triangleUVFromPoint(b,i,k);e.push(new verb.core.PolylineMeshIntersection(k,l,m,h,i))}}return e},verb.eval.Intersect.boundingBoxTrees=function(a,b,c){null==c&&(c=1e-9);var d=[],e=[];d.push(a),e.push(b);for(var f=[];d.length>0;){var g=d.pop(),h=e.pop();if(!g.empty()&&!h.empty()&&g.boundingBox().intersects(h.boundingBox(),c)){var i=g.indivisible(c),j=h.indivisible(c);if(i&&j)f.push(new verb.core.Pair(g["yield"](),h["yield"]()));else if(!i||j)if(i||!j){var k=g.split(),l=h.split();d.push(k.item1),e.push(l.item1),d.push(k.item1),e.push(l.item0),d.push(k.item0),e.push(l.item1),d.push(k.item0),e.push(l.item0)}else{var m=g.split();d.push(m.item1),e.push(h),d.push(m.item0),e.push(h)}else{var n=h.split();d.push(g),e.push(n.item1),d.push(g),e.push(n.item0)}}}return f},verb.eval.Intersect.curves=function(a,b,c){var d=verb.eval.Intersect.boundingBoxTrees(new verb.core.LazyCurveBoundingBoxTree(a),new verb.core.LazyCurveBoundingBoxTree(b),0);return verb.core.ArrayExtensions.unique(d.map(function(d){return verb.eval.Intersect.curvesWithEstimate(a,b,verb.core.ArrayExtensions.first(d.item0.knots),verb.core.ArrayExtensions.first(d.item1.knots),c)}).filter(function(a){return verb.core.Vec.distSquared(a.point0,a.point1)<c}),function(a,b){return Math.abs(a.u0-b.u0)<5*c})},verb.eval.Intersect.curvesWithEstimate=function(a,b,c,d,e){var f=function(c){var d=verb.eval.Eval.rationalCurvePoint(a,c[0]),e=verb.eval.Eval.rationalCurvePoint(b,c[1]),f=verb.core.Vec.sub(d,e);return verb.core.Vec.dot(f,f)},g=function(c){var d=verb.eval.Eval.rationalCurveDerivatives(a,c[0],1),e=verb.eval.Eval.rationalCurveDerivatives(b,c[1],1),f=verb.core.Vec.sub(d[0],e[0]),g=d[1],h=verb.core.Vec.mul(-1,e[1]);return[2*verb.core.Vec.dot(g,f),2*verb.core.Vec.dot(h,f)]},h=verb.core.Numeric.uncmin(f,[c,d],e*e,g),i=h.solution[0],j=h.solution[1],k=verb.eval.Eval.rationalCurvePoint(a,i),l=verb.eval.Eval.rationalCurvePoint(b,j);return new verb.core.CurveCurveIntersection(k,l,i,j)},verb.eval.Intersect.triangles=function(a,b,c,d){var e=a.faces[b],f=c.faces[d],g=verb.core.Mesh.getTriangleNorm(a.points,e),h=verb.core.Mesh.getTriangleNorm(c.points,f),i=a.points[e[0]],j=c.points[f[0]],k=verb.eval.Intersect.planes(i,g,j,h);if(null==k)return null;var l=verb.eval.Intersect.clipRayInCoplanarTriangle(k,a,b);if(null==l)return null;var m=verb.eval.Intersect.clipRayInCoplanarTriangle(k,c,d);if(null==m)return null;var n=verb.eval.Intersect.mergeTriangleClipIntervals(l,m,a,b,c,d);return null==n?null:new verb.core.Interval(new verb.core.MeshIntersectionPoint(n.min.uv0,n.min.uv1,n.min.point,b,d),new verb.core.MeshIntersectionPoint(n.max.uv0,n.max.uv1,n.max.point,b,d))},verb.eval.Intersect.clipRayInCoplanarTriangle=function(a,b,c){for(var d=b.faces[c],e=[b.points[d[0]],b.points[d[1]],b.points[d[2]]],f=[b.uvs[d[0]],b.uvs[d[1]],b.uvs[d[2]]],g=[verb.core.Vec.sub(f[1],f[0]),verb.core.Vec.sub(f[2],f[1]),verb.core.Vec.sub(f[0],f[2])],h=[verb.core.Vec.sub(e[1],e[0]),verb.core.Vec.sub(e[2],e[1]),verb.core.Vec.sub(e[0],e[2])],i=h.map(verb.core.Vec.normalized),j=h.map(verb.core.Vec.norm),k=null,l=null,m=0;3>m;){var n=m++,o=e[n],p=i[n],q=verb.eval.Intersect.rays(o,p,a.origin,a.dir);if(null!=q){var r=q.u0,s=q.u1;r<-verb.core.Constants.EPSILON||r>j[n]+verb.core.Constants.EPSILON||((null==k||s<k.u)&&(k=new verb.core.CurveTriPoint(s,verb.core.Vec.onRay(a.origin,a.dir,s),verb.core.Vec.onRay(f[n],g[n],r/j[n]))),(null==l||s>l.u)&&(l=new verb.core.CurveTriPoint(s,verb.core.Vec.onRay(a.origin,a.dir,s),verb.core.Vec.onRay(f[n],g[n],r/j[n]))))}}return null==l||null==k?null:new verb.core.Interval(k,l)},verb.eval.Intersect.mergeTriangleClipIntervals=function(a,b,c,d,e,f){if(b.min.u>a.max.u+verb.core.Constants.EPSILON||a.min.u>b.max.u+verb.core.Constants.EPSILON)return null;var g;g=a.min.u>b.min.u?new verb.core.Pair(a.min,0):new verb.core.Pair(b.min,1);var h;h=a.max.u<b.max.u?new verb.core.Pair(a.max,0):new verb.core.Pair(b.max,1);var i=new verb.core.Interval(new verb.core.MeshIntersectionPoint(null,null,g.item0.point,d,f),new verb.core.MeshIntersectionPoint(null,null,h.item0.point,d,f));return 0==g.item1?(i.min.uv0=g.item0.uv,i.min.uv1=verb.core.Mesh.triangleUVFromPoint(e,f,g.item0.point)):(i.min.uv0=verb.core.Mesh.triangleUVFromPoint(c,d,g.item0.point),i.min.uv1=g.item0.uv),0==h.item1?(i.max.uv0=h.item0.uv,i.max.uv1=verb.core.Mesh.triangleUVFromPoint(e,f,h.item0.point)):(i.max.uv0=verb.core.Mesh.triangleUVFromPoint(c,d,h.item0.point),i.max.uv1=h.item0.uv),i},verb.eval.Intersect.planes=function(a,b,c,d){var e=verb.core.Vec.cross(b,d);if(verb.core.Vec.dot(e,e)<verb.core.Constants.EPSILON)return null;var f=0,g=Math.abs(e[0]),h=Math.abs(e[1]),i=Math.abs(e[2]);h>g&&(f=1,g=h),i>g&&(f=2,g=i);var j,k,l,m;0==f?(j=b[1],k=b[2],l=d[1],m=d[2]):1==f?(j=b[0],k=b[2],l=d[0],m=d[2]):(j=b[0],
k=b[1],l=d[0],m=d[1]);var n,o=-verb.core.Vec.dot(a,b),p=-verb.core.Vec.dot(c,d),q=j*m-k*l,r=(k*p-o*m)/q,s=(o*l-j*p)/q;return n=0==f?[0,r,s]:1==f?[r,0,s]:[r,s,0],new verb.core.Ray(n,verb.core.Vec.normalized(e))},verb.eval.Intersect.threePlanes=function(a,b,c,d,e,f){var g=verb.core.Vec.cross(c,e),h=verb.core.Vec.dot(a,g);if(Math.abs(h)<verb.core.Constants.EPSILON)return null;var i=verb.core.Vec.sub(verb.core.Vec.mul(f,c),verb.core.Vec.mul(d,e)),j=verb.core.Vec.add(verb.core.Vec.mul(b,g),verb.core.Vec.cross(a,i));return verb.core.Vec.mul(1/h,j)},verb.eval.Intersect.polylines=function(a,b,c){for(var d=verb.eval.Intersect.boundingBoxTrees(new verb.core.LazyPolylineBoundingBoxTree(a),new verb.core.LazyPolylineBoundingBoxTree(b),c),e=[],f=0;f<d.length;){var g=d[f];++f;var h=g.item0,i=g.item1,j=verb.eval.Intersect.segments(a.points[h],a.points[h+1],b.points[i],b.points[i+1],c);null!=j&&(j.u0=verb.core.Vec.lerp(j.u0,[a.params[h]],[a.params[h+1]])[0],j.u1=verb.core.Vec.lerp(j.u1,[b.params[i]],[b.params[i+1]])[0],e.push(j))}return e},verb.eval.Intersect.segments=function(a,b,c,d,e){var f=verb.core.Vec.sub(b,a),g=Math.sqrt(verb.core.Vec.dot(f,f)),h=verb.core.Vec.mul(1/g,f),i=verb.core.Vec.sub(d,c),j=Math.sqrt(verb.core.Vec.dot(i,i)),k=verb.core.Vec.mul(1/j,i),l=verb.eval.Intersect.rays(a,h,c,k);if(null!=l){var m=Math.min(Math.max(0,l.u0/g),1),n=Math.min(Math.max(0,l.u1/j),1),o=verb.core.Vec.onRay(a,f,m),p=verb.core.Vec.onRay(c,i,n),q=verb.core.Vec.distSquared(o,p);if(e*e>q)return new verb.core.CurveCurveIntersection(o,p,m,n)}return null},verb.eval.Intersect.rays=function(a,b,c,d){var e=verb.core.Vec.dot(b,d),f=verb.core.Vec.dot(b,c),g=verb.core.Vec.dot(b,a),h=verb.core.Vec.dot(d,c),i=verb.core.Vec.dot(d,a),j=verb.core.Vec.dot(b,b),k=verb.core.Vec.dot(d,d),l=j*k-e*e;if(Math.abs(l)<verb.core.Constants.EPSILON)return null;var m=e*(f-g)-j*(h-i),n=m/l,o=(f-g+n*e)/j,p=verb.core.Vec.onRay(a,b,o),q=verb.core.Vec.onRay(c,d,n);return new verb.core.CurveCurveIntersection(p,q,o,n)},verb.eval.Intersect.segmentWithTriangle=function(a,b,c,d){var e=c[d[0]],f=c[d[1]],g=c[d[2]],h=verb.core.Vec.sub(f,e),i=verb.core.Vec.sub(g,e),j=verb.core.Vec.cross(h,i),k=verb.core.Vec.sub(b,a),l=verb.core.Vec.sub(a,e),m=-verb.core.Vec.dot(j,l),n=verb.core.Vec.dot(j,k);if(Math.abs(n)<verb.core.Constants.EPSILON)return null;var o=m/n;if(0>o||o>1)return null;var p=verb.core.Vec.add(a,verb.core.Vec.mul(o,k)),q=verb.core.Vec.dot(h,i),r=verb.core.Vec.dot(h,h),s=verb.core.Vec.dot(i,i),t=verb.core.Vec.sub(p,e),u=verb.core.Vec.dot(t,h),v=verb.core.Vec.dot(t,i),w=q*q-r*s;if(Math.abs(w)<verb.core.Constants.EPSILON)return null;var x=(q*v-s*u)/w,y=(q*u-r*v)/w;return x>1+verb.core.Constants.EPSILON||y>1+verb.core.Constants.EPSILON||y<-verb.core.Constants.EPSILON||x<-verb.core.Constants.EPSILON||x+y>1+verb.core.Constants.EPSILON?null:new verb.core.TriSegmentIntersection(p,x,y,o)},verb.eval.Intersect.segmentAndPlane=function(a,b,c,d){var e=verb.core.Vec.dot(d,verb.core.Vec.sub(b,a));if(Math.abs(e)<verb.core.Constants.EPSILON)return null;var f=verb.core.Vec.dot(d,verb.core.Vec.sub(c,a)),g=f/e;return g>1+verb.core.Constants.EPSILON||g<-verb.core.Constants.EPSILON?null:{p:g}},verb.eval.Make=$hx_exports.eval.Make=function(){},verb.eval.Make.__name__=["verb","eval","Make"],verb.eval.Make.rationalTranslationalSurface=function(a,b){for(var c=verb.eval.Eval.rationalCurvePoint(b,verb.core.ArrayExtensions.first(b.knots)),d=verb.core.ArrayExtensions.first(b.knots),e=verb.core.ArrayExtensions.last(b.knots),f=2*b.controlPoints.length,g=(e-d)/(f-1),h=[],i=0;f>i;){var j=i++,k=verb.core.Vec.sub(verb.eval.Eval.rationalCurvePoint(b,d+j*g),c),l=verb.eval.Modify.rationalCurveTransform(a,[[1,0,0,k[0]],[0,1,0,k[1]],[0,0,1,k[2]],[0,0,0,1]]);h.push(l)}return verb.eval.Make.loftedSurface(h)},verb.eval.Make.surfaceBoundaryCurves=function(a){var b=verb.eval.Make.surfaceIsocurve(a,verb.core.ArrayExtensions.first(a.knotsU),!1),c=verb.eval.Make.surfaceIsocurve(a,verb.core.ArrayExtensions.last(a.knotsU),!1),d=verb.eval.Make.surfaceIsocurve(a,verb.core.ArrayExtensions.first(a.knotsV),!0),e=verb.eval.Make.surfaceIsocurve(a,verb.core.ArrayExtensions.last(a.knotsV),!0);return[b,c,d,e]},verb.eval.Make.surfaceIsocurve=function(a,b,c){null==c&&(c=!1);var d;d=c?a.knotsV:a.knotsU;var e;e=c?a.degreeV:a.degreeU;for(var f=verb.eval.Analyze.knotMultiplicities(d),g=-1,h=0,i=f.length;i>h;){var j=h++;if(Math.abs(b-f[j].knot)<verb.core.Constants.EPSILON){g=j;break}}var k=e+1;g>=0&&(k-=f[g].mult);var l;l=k>0?verb.eval.Modify.surfaceKnotRefine(a,verb.core.Vec.rep(k,b),c):a;var m=verb.eval.Eval.knotSpan(e,b,d);return Math.abs(b-verb.core.ArrayExtensions.first(d))<verb.core.Constants.EPSILON?m=0:Math.abs(b-verb.core.ArrayExtensions.last(d))<verb.core.Constants.EPSILON&&(m=(c?l.controlPoints[0].length:l.controlPoints.length)-1),c?new verb.core.NurbsCurveData(l.degreeU,l.knotsU,function(a){for(var b,c=[],d=0,e=l.controlPoints;d<e.length;){var f=e[d];++d,c.push(f[m])}return b=c}(this)):new verb.core.NurbsCurveData(l.degreeV,l.knotsV,l.controlPoints[m])},verb.eval.Make.loftedSurface=function(a,b){a=verb.eval.Modify.unifyCurveKnotVectors(a);var c=a[0].degree;null==b&&(b=3),b>a.length-1&&(b=a.length-1);for(var d=a[0].knots,e=[],f=[],g=0,h=a[0].controlPoints.length;h>g;){var i=[g++],j=a.map(function(a){return function(b){return b.controlPoints[a[0]]}}(i)),k=verb.eval.Make.rationalInterpCurve(j,b,!0);f.push(k.controlPoints),e=k.knots}return new verb.core.NurbsSurfaceData(c,b,d,e,f)},verb.eval.Make.clonedCurve=function(a){return new verb.core.NurbsCurveData(a.degree,a.knots.slice(),a.controlPoints.map(function(a){return a.slice()}))},verb.eval.Make.rationalBezierCurve=function(a,b){for(var c=a.length-1,d=[],e=0,f=c+1;f>e;){e++;d.push(0)}for(var g=0,h=c+1;h>g;){g++;d.push(1)}return null==b&&(b=verb.core.Vec.rep(a.length,1)),new verb.core.NurbsCurveData(c,d,verb.eval.Eval.homogenize1d(a,b))},verb.eval.Make.fourPointSurface=function(a,b,c,d,e){null==e&&(e=3);for(var f=e,g=[],h=0,i=e+1;i>h;){for(var j=h++,k=[],l=0,m=e+1;m>l;){var n=l++,o=1-j/f,p=verb.core.Vec.lerp(o,a,b),q=verb.core.Vec.lerp(o,d,c),r=verb.core.Vec.lerp(1-n/f,p,q);r.push(1),k.push(r)}g.push(k)}var s=verb.core.Vec.rep(e+1,0),t=verb.core.Vec.rep(e+1,1);return new verb.core.NurbsSurfaceData(e,e,s.concat(t),s.concat(t),g)},verb.eval.Make.ellipseArc=function(a,b,c,d,e){var f=verb.core.Vec.norm(b),g=verb.core.Vec.norm(c);b=verb.core.Vec.normalized(b),c=verb.core.Vec.normalized(c),d>e&&(e=2*Math.PI+d);var h=e-d,i=0;i=h<=Math.PI/2?1:h<=Math.PI?2:h<=3*Math.PI/2?3:4;var j=h/i,k=Math.cos(j/2),l=verb.core.Vec.add(a,verb.core.Vec.add(verb.core.Vec.mul(f*Math.cos(d),b),verb.core.Vec.mul(g*Math.sin(d),c))),m=verb.core.Vec.sub(verb.core.Vec.mul(Math.cos(d),c),verb.core.Vec.mul(Math.sin(d),b)),n=[],o=verb.core.Vec.zeros1d(2*i+3),p=0,q=d,r=verb.core.Vec.zeros1d(2*i);n[0]=l,r[0]=1;for(var s=1,t=i+1;t>s;){var u=s++;q+=j;var v=verb.core.Vec.add(a,verb.core.Vec.add(verb.core.Vec.mul(f*Math.cos(q),b),verb.core.Vec.mul(g*Math.sin(q),c)));r[p+2]=1,n[p+2]=v;var w=verb.core.Vec.sub(verb.core.Vec.mul(Math.cos(q),c),verb.core.Vec.mul(Math.sin(q),b)),x=verb.eval.Intersect.rays(l,verb.core.Vec.mul(1/verb.core.Vec.norm(m),m),v,verb.core.Vec.mul(1/verb.core.Vec.norm(w),w)),y=verb.core.Vec.add(l,verb.core.Vec.mul(x.u0,m));r[p+1]=k,n[p+1]=y,p+=2,i>u&&(l=v,m=w)}for(var z=2*i+1,A=0;3>A;){var B=A++;o[B]=0,o[B+z]=1}switch(i){case 2:o[3]=o[4]=.5;break;case 3:o[3]=o[4]=.3333333333333333,o[5]=o[6]=.6666666666666666;break;case 4:o[3]=o[4]=.25,o[5]=o[6]=.5,o[7]=o[8]=.75}return new verb.core.NurbsCurveData(2,o,verb.eval.Eval.homogenize1d(n,r))},verb.eval.Make.arc=function(a,b,c,d,e,f){return verb.eval.Make.ellipseArc(a,verb.core.Vec.mul(d,verb.core.Vec.normalized(b)),verb.core.Vec.mul(d,verb.core.Vec.normalized(c)),e,f)},verb.eval.Make.polyline=function(a){for(var b=[0,0],c=0,d=0,e=a.length-1;e>d;){var f=d++;c+=verb.core.Vec.dist(a[f],a[f+1]),b.push(c)}b.push(c),b=verb.core.Vec.mul(1/c,b);for(var g,h=[],i=0,j=a.length;j>i;){i++;h.push(1)}return g=h,new verb.core.NurbsCurveData(1,b,verb.eval.Eval.homogenize1d(a.slice(0),g))},verb.eval.Make.extrudedSurface=function(a,b,c){for(var d=[[],[],[]],e=[[],[],[]],f=verb.eval.Eval.dehomogenize1d(c.controlPoints),g=verb.eval.Eval.weight1d(c.controlPoints),h=verb.core.Vec.mul(b,a),i=verb.core.Vec.mul(.5*b,a),j=0,k=f.length;k>j;){var l=j++;d[2][l]=f[l],d[1][l]=verb.core.Vec.add(i,f[l]),d[0][l]=verb.core.Vec.add(h,f[l]),e[0][l]=g[l],e[1][l]=g[l],e[2][l]=g[l]}return new verb.core.NurbsSurfaceData(2,c.degree,[0,0,0,1,1,1],c.knots,verb.eval.Eval.homogenize2d(d,e))},verb.eval.Make.cylindricalSurface=function(a,b,c,d,e){var f=verb.core.Vec.cross(a,b),g=(2*Math.PI,verb.eval.Make.arc(c,b,f,e,0,2*Math.PI));return verb.eval.Make.extrudedSurface(a,d,g)},verb.eval.Make.revolvedSurface=function(a,b,c,d){var e,f,g=verb.eval.Eval.dehomogenize1d(a.controlPoints),h=verb.eval.Eval.weight1d(a.controlPoints);d<=Math.PI/2?(e=1,f=verb.core.Vec.zeros1d(6+2*(e-1))):d<=Math.PI?(e=2,f=verb.core.Vec.zeros1d(6+2*(e-1)),f[3]=f[4]=.5):d<=3*Math.PI/2?(e=3,f=verb.core.Vec.zeros1d(6+2*(e-1)),f[3]=f[4]=.3333333333333333,f[5]=f[6]=.6666666666666666):(e=4,f=verb.core.Vec.zeros1d(6+2*(e-1)),f[3]=f[4]=.25,f[5]=f[6]=.5,f[7]=f[8]=.75);for(var i=d/e,j=3+2*(e-1),k=0;3>k;){var l=k++;f[l]=0,f[j+l]=1}for(var m=Math.cos(i/2),n=0,o=verb.core.Vec.zeros1d(e+1),p=verb.core.Vec.zeros1d(e+1),q=verb.core.Vec.zeros3d(2*e+1,g.length,3),r=verb.core.Vec.zeros2d(2*e+1,g.length),s=1,t=e+1;t>s;){var u=s++;n+=i,p[u]=Math.cos(n),o[u]=Math.sin(n)}for(var v=0,w=g.length;w>v;){var x=v++,y=verb.core.Trig.rayClosestPoint(g[x],b,c),z=verb.core.Vec.sub(g[x],y),A=verb.core.Vec.norm(z),B=verb.core.Vec.cross(c,z);A>verb.core.Constants.EPSILON&&(z=verb.core.Vec.mul(1/A,z),B=verb.core.Vec.mul(1/A,B)),q[0][x]=g[x];var C=g[x];r[0][x]=h[x];for(var D=B,E=0,F=1,G=e+1;G>F;){var H,I=F++;H=0==A?y:verb.core.Vec.add(y,verb.core.Vec.add(verb.core.Vec.mul(A*p[I],z),verb.core.Vec.mul(A*o[I],B))),q[E+2][x]=H,r[E+2][x]=h[x];var J=verb.core.Vec.sub(verb.core.Vec.mul(p[I],B),verb.core.Vec.mul(o[I],z));if(0==A)q[E+1][x]=y;else{var K=verb.eval.Intersect.rays(C,verb.core.Vec.mul(1/verb.core.Vec.norm(D),D),H,verb.core.Vec.mul(1/verb.core.Vec.norm(J),J)),L=verb.core.Vec.add(C,verb.core.Vec.mul(K.u0,D));q[E+1][x]=L}r[E+1][x]=m*h[x],E+=2,e>I&&(C=H,D=J)}}return new verb.core.NurbsSurfaceData(2,a.degree,f,a.knots,verb.eval.Eval.homogenize2d(q,r))},verb.eval.Make.sphericalSurface=function(a,b,c,d){var e=verb.eval.Make.arc(a,verb.core.Vec.mul(-1,b),c,d,0,Math.PI);return verb.eval.Make.revolvedSurface(e,a,b,2*Math.PI)},verb.eval.Make.conicalSurface=function(a,b,c,d,e){var f=2*Math.PI,g=1,h=[verb.core.Vec.add(c,verb.core.Vec.mul(d,a)),verb.core.Vec.add(c,verb.core.Vec.mul(e,b))],i=[0,0,1,1],j=[1,1],k=new verb.core.NurbsCurveData(g,i,verb.eval.Eval.homogenize1d(h,j));return verb.eval.Make.revolvedSurface(k,c,a,f)},verb.eval.Make.rationalInterpCurve=function(a,b,c,d,e){if(null==c&&(c=!1),null==b&&(b=3),a.length<b+1)throw"You need to supply at least degree + 1 points! You only supplied "+a.length+" points.";for(var f=[0],g=1,h=a.length;h>g;){var i=g++,j=verb.core.Vec.norm(verb.core.Vec.sub(a[i],a[i-1])),k=f[f.length-1];f.push(k+j)}for(var l=f[f.length-1],m=0,n=f.length;n>m;){var o=m++;f[o]=f[o]/l}var p,q=verb.core.Vec.rep(b+1,0),r=null!=d&&null!=e;p=r?0:1;var s;s=r?f.length-b+1:f.length-b;for(var t=p;s>t;){for(var u=t++,v=0,w=0;b>w;){var x=w++;v+=f[u+x]}q.push(1/b*v)}var y,z=q.concat(verb.core.Vec.rep(b+1,1)),A=[];y=r?a.length+1:a.length-1;var B;B=r?1:0;var C;C=r?a.length-(b-1):a.length-(b+1);for(var D=0;D<f.length;){var E=f[D];++D;var F=verb.eval.Eval.knotSpanGivenN(y,b,E,z),G=verb.eval.Eval.basisFunctionsGivenKnotSpanIndex(F,E,b,z),H=F-b,I=verb.core.Vec.zeros1d(H),J=verb.core.Vec.zeros1d(C-H);A.push(I.concat(G).concat(J))}if(r){var K=A[0].length-2,L=[-1,1].concat(verb.core.Vec.zeros1d(K)),M=verb.core.Vec.zeros1d(K).concat([-1,1]);verb.core.ArrayExtensions.spliceAndInsert(A,1,0,L),verb.core.ArrayExtensions.spliceAndInsert(A,A.length-1,0,M)}for(var N=a[0].length,O=[],P=(1-z[z.length-b-2])/b,Q=z[b+1]/b,R=0;N>R;){var S,T=[R++];if(r){S=[a[0][T[0]]],S.push(Q*d[T[0]]);for(var U=1,V=a.length-1;V>U;){var W=U++;S.push(a[W][T[0]])}S.push(P*e[T[0]]),S.push(verb.core.ArrayExtensions.last(a)[T[0]])}else S=a.map(function(a){return function(b){return b[a[0]]}}(T));var X=verb.core.Mat.solve(A,S);O.push(X)}var Y=verb.core.Mat.transpose(O);if(!c){var Z=verb.core.Vec.rep(Y.length,1);Y=verb.eval.Eval.homogenize1d(Y,Z)}return new verb.core.NurbsCurveData(b,z,Y)},verb.eval.Modify=$hx_exports.eval.Modify=function(){},verb.eval.Modify.__name__=["verb","eval","Modify"],verb.eval.Modify.curveReverse=function(a){return new verb.core.NurbsCurveData(a.degree,verb.eval.Modify.knotsReverse(a.knots),verb.core.ArrayExtensions.reversed(a.controlPoints))},verb.eval.Modify.surfaceReverse=function(a,b){return null==b&&(b=!1),b?new verb.core.NurbsSurfaceData(a.degreeU,a.degreeV,a.knotsU,verb.eval.Modify.knotsReverse(a.knotsV),function(b){for(var c,d=[],e=0,f=a.controlPoints;e<f.length;){var g=f[e];++e,d.push(verb.core.ArrayExtensions.reversed(g))}return c=d}(this)):new verb.core.NurbsSurfaceData(a.degreeU,a.degreeV,verb.eval.Modify.knotsReverse(a.knotsU),a.knotsV,verb.core.ArrayExtensions.reversed(a.controlPoints))},verb.eval.Modify.knotsReverse=function(a){for(var b=verb.core.ArrayExtensions.first(a),c=(verb.core.ArrayExtensions.last(a),[b]),d=a.length,e=1;d>e;){var f=e++;c.push(c[f-1]+(a[d-f]-a[d-f-1]))}return c},verb.eval.Modify.unifyCurveKnotVectors=function(a){a=a.map(verb.eval.Make.clonedCurve);for(var b=Lambda.fold(a,function(a,b){return verb.eval.Modify.imax(a.degree,b)},0),c=0,d=a.length;d>c;){var e=c++;a[e].degree<b&&(a[e]=verb.eval.Modify.curveElevateDegree(a[e],b))}for(var f,g=[],h=0;h<a.length;){var i=a[h];++h,g.push(new verb.core.Interval(verb.core.ArrayExtensions.first(i.knots),verb.core.ArrayExtensions.last(i.knots)))}f=g;for(var j=0,k=a.length;k>j;){var l=j++,m=[f[l].min];a[l].knots=a[l].knots.map(function(a){return function(b){return b-a[0]}}(m))}for(var n=f.map(function(a){return a.max-a.min}),o=Lambda.fold(n,function(a,b){return Math.max(a,b)},0),p=0,q=a.length;q>p;){var r=p++,s=[o/n[r]];a[r].knots=a[r].knots.map(function(a){return function(b){return b*a[0]}}(s))}for(var t=Lambda.fold(a,function(a,b){return verb.core.Vec.sortedSetUnion(a.knots,b)},[]),u=0,v=a.length;v>u;){var w=u++,x=verb.core.Vec.sortedSetSub(t,a[w].knots);0==x.length&&(a[w]=a[w]),a[w]=verb.eval.Modify.curveKnotRefine(a[w],x)}return a},verb.eval.Modify.imin=function(a,b){return b>a?a:b},verb.eval.Modify.imax=function(a,b){return a>b?a:b},verb.eval.Modify.curveElevateDegree=function(a,b){if(b<=a.degree)return a;var c,d=a.knots.length-a.degree-2,e=a.degree,f=a.knots,g=a.controlPoints,h=b-a.degree,i=a.controlPoints[0].length,j=verb.core.Vec.zeros2d(e+h+1,e+1),k=[],l=[],m=[],n=d+e+1,o=b,p=Math.floor(o/2),q=[],r=[];j[0][0]=1,j[o][e]=1;for(var s=1,t=p+1;t>s;){var u,v=s++,w=1/verb.core.Binomial.get(o,v);u=v>e?e:v;for(var x=verb.eval.Modify.imax(0,v-h),y=u+1;y>x;){var z=x++;j[v][z]=w*verb.core.Binomial.get(e,z)*verb.core.Binomial.get(h,v-z)}}for(var A=p+1;o>A;){var B,C=A++;B=C>e?e:C;for(var D=verb.eval.Modify.imax(0,C-h),E=B+1;E>D;){var F=D++;j[C][F]=j[o-C][e-F]}}var G=o,H=o+1,I=-1,J=e,K=e+1,L=1,M=f[0];q[0]=g[0];for(var N=0,O=o+1;O>N;){var P=N++;r[P]=M}for(var Q=0,R=e+1;R>Q;){var S=Q++;k[S]=g[S]}for(;n>K;){for(var T=K;n>K&&f[K]==f[K+1];)K+=1;var U=K-T+1,V=f[K],W=I;I=e-U;var X;X=W>0?Math.floor((W+2)/2):1;var Y;if(Y=I>0?Math.floor(o-(I+1)/2):o,I>0){for(var Z=V-M,$=[],_=e;_>U;)$[_-U-1]=Z/(f[J+_]-M),_--;for(var aa=1,ba=I+1;ba>aa;){for(var ca=aa++,da=I-ca,ea=U+ca,fa=e;fa>=ea;)k[fa]=verb.core.Vec.add(verb.core.Vec.mul($[fa-ea],k[fa]),verb.core.Vec.mul(1-$[fa-ea],k[fa-1])),fa--;m[da]=k[e]}}for(var ga=X,ha=o+1;ha>ga;){var ia=ga++;l[ia]=verb.core.Vec.zeros1d(i);var ja;ja=ia>e?e:ia;for(var ka=verb.eval.Modify.imax(0,ia-h),la=ja+1;la>ka;){var ma=ka++;l[ia]=verb.core.Vec.add(l[ia],verb.core.Vec.mul(j[ia][ma],k[ma]))}}if(W>1)for(var na=H-2,oa=H,pa=V-M,qa=(V-r[H-1])/pa,ra=1;W>ra;){for(var sa=ra++,ta=na,ua=oa,va=ua-H+1;ua-ta>sa;){if(L>ta){var wa=(V-r[ta])/(M-r[ta]);q[ta]=verb.core.Vec.lerp(wa,q[ta],q[ta-1])}if(ua>=X){if(H-o+W>=ua-sa){var xa=(V-r[ua-sa])/pa;l[va]=verb.core.Vec.lerp(xa,l[va],l[va+1])}}else l[va]=verb.core.Vec.lerp(qa,l[va],l[va+1]);ta+=1,ua-=1,va-=1}na-=1,oa+=1}if(J!=e)for(var ya=0,za=o-W;za>ya;){ya++;r[H]=M,H+=1}for(var Aa=X,Ba=Y+1;Ba>Aa;){var Ca=Aa++;q[L]=l[Ca],L+=1}if(n>K){for(var Da=0;I>Da;){var Ea=Da++;k[Ea]=m[Ea]}for(var Fa=I,Ga=e+1;Ga>Fa;){var Ha=Fa++;k[Ha]=g[K-e+Ha]}J=K,K+=1,M=V}else for(var Ia=0,Ja=o+1;Ja>Ia;){var Ka=Ia++;r[H+Ka]=V}}return c=G-o-1,new verb.core.NurbsCurveData(b,r,q)},verb.eval.Modify.rationalSurfaceTransform=function(a,b){for(var c=verb.eval.Eval.dehomogenize2d(a.controlPoints),d=0,e=c.length;e>d;)for(var f=d++,g=0,h=c[f].length;h>g;){var i=g++,j=c[f][i];j.push(1),c[f][i]=verb.core.Mat.dot(b,j).slice(0,j.length-1)}return new verb.core.NurbsSurfaceData(a.degreeU,a.degreeV,a.knotsU.slice(),a.knotsV.slice(),verb.eval.Eval.homogenize2d(c,verb.eval.Eval.weight2d(a.controlPoints)))},verb.eval.Modify.rationalCurveTransform=function(a,b){for(var c=verb.eval.Eval.dehomogenize1d(a.controlPoints),d=0,e=c.length;e>d;){var f=d++,g=c[f];g.push(1),c[f]=verb.core.Mat.dot(b,g).slice(0,g.length-1)}return new verb.core.NurbsCurveData(a.degree,a.knots.slice(),verb.eval.Eval.homogenize1d(c,verb.eval.Eval.weight1d(a.controlPoints)))},verb.eval.Modify.surfaceKnotRefine=function(a,b,c){var d,e,f,g=[];c?(f=a.controlPoints,d=a.knotsV,e=a.degreeV):(f=verb.core.Mat.transpose(a.controlPoints),d=a.knotsU,e=a.degreeU);for(var h=null,i=0;i<f.length;){var j=f[i];++i,h=verb.eval.Modify.curveKnotRefine(new verb.core.NurbsCurveData(e,d,j),b),g.push(h.controlPoints)}var k=h.knots;return c?new verb.core.NurbsSurfaceData(a.degreeU,a.degreeV,a.knotsU.slice(),k,g):(g=verb.core.Mat.transpose(g),new verb.core.NurbsSurfaceData(a.degreeU,a.degreeV,k,a.knotsV.slice(),g))},verb.eval.Modify.decomposeCurveIntoBeziers=function(a){for(var b=a.degree,c=a.controlPoints,d=a.knots,e=verb.eval.Analyze.knotMultiplicities(d),f=b+1,g=0;g<e.length;){var h=e[g];if(++g,h.mult<f){var i=verb.core.Vec.rep(f-h.mult,h.knot),j=verb.eval.Modify.curveKnotRefine(new verb.core.NurbsCurveData(b,d,c),i);d=j.knots,c=j.controlPoints}}for(var k=(d.length/f-1,2*f),l=[],m=0;m<c.length;){var n=d.slice(m,m+k),o=c.slice(m,m+f);l.push(new verb.core.NurbsCurveData(b,n,o)),m+=f}return l},verb.eval.Modify.curveKnotRefine=function(a,b){if(0==b.length)return verb.eval.Make.clonedCurve(a);for(var c=a.degree,d=a.controlPoints,e=a.knots,f=d.length-1,g=f+c+1,h=b.length-1,i=verb.eval.Eval.knotSpan(c,b[0],e),j=verb.eval.Eval.knotSpan(c,b[h],e),k=new Array,l=new Array,m=0,n=i-c+1;n>m;){var o=m++;k[o]=d[o]}for(var p=j-1,q=f+1;q>p;){var r=p++;k[r+h+1]=d[r]}for(var s=0,t=i+1;t>s;){var u=s++;l[u]=e[u]}for(var v=j+c,w=g+1;w>v;){var x=v++;l[x+h+1]=e[x]}for(var y=j+c-1,z=j+c+h,A=h;A>=0;){for(;b[A]<=e[y]&&y>i;)k[z-c-1]=d[y-c-1],l[z]=e[y],z-=1,y-=1;k[z-c-1]=k[z-c];for(var B=1,C=c+1;C>B;){var D=B++,E=z-c+D,F=l[z+D]-b[A];Math.abs(F)<verb.core.Constants.EPSILON?k[E-1]=k[E]:(F/=l[z+D]-e[y-c+D],k[E-1]=verb.core.Vec.add(verb.core.Vec.mul(F,k[E-1]),verb.core.Vec.mul(1-F,k[E])))}l[z]=b[A],z-=1,A--}return new verb.core.NurbsCurveData(c,l,k)},verb.eval.Modify.curveKnotInsert=function(a,b,c){for(var d=a.degree,e=a.controlPoints,f=a.knots,g=0,h=e.length,i=verb.eval.Eval.knotSpan(d,b,f),j=new Array,k=new Array,l=new Array,m=1,n=i+1;n>m;){var o=m++;k[o]=f[o]}for(var p=1,q=c+1;q>p;){var r=p++;k[i+r]=b}for(var s=i+1,t=f.length;t>s;){var u=s++;k[u+c]=f[u]}for(var v=0,w=i-d+1;w>v;){var x=v++;l[x]=e[x]}for(var y=i-g;h>y;){var z=y++;l[z+c]=e[z]}for(var A=0,B=d-g+1;B>A;){var C=A++;j[C]=e[i-d+C]}for(var D=0,E=0,F=1,G=c+1;G>F;){var H=F++;D=i-d+H;for(var I=0,J=d-H-g+1;J>I;){var K=I++;E=(b-f[D+K])/(f[K+i+1]-f[D+K]),j[K]=verb.core.Vec.add(verb.core.Vec.mul(E,j[K+1]),verb.core.Vec.mul(1-E,j[K]))}l[D]=j[0],l[i+c-H-g]=j[d-H-g]}for(var L=D+1,M=i-g;M>L;){var N=L++;l[N]=j[N-D]}return new verb.core.NurbsCurveData(d,k,l)},verb.eval.Tess=$hx_exports.eval.Tess=function(){},verb.eval.Tess.__name__=["verb","eval","Tess"],verb.eval.Tess.rationalCurveRegularSample=function(a,b,c){return verb.eval.Tess.rationalCurveRegularSampleRange(a,a.knots[0],verb.core.ArrayExtensions.last(a.knots),b,c)},verb.eval.Tess.rationalCurveRegularSampleRange=function(a,b,c,d,e){1>d&&(d=2);for(var f=[],g=(c-b)/(d-1),h=0,i=0;d>i;){var j=i++;h=b+g*j,e?f.push([h].concat(verb.eval.Eval.rationalCurvePoint(a,h))):f.push(verb.eval.Eval.rationalCurvePoint(a,h))}return f},verb.eval.Tess.rationalCurveAdaptiveSample=function(a,b,c){if(null==c&&(c=!1),null==b&&(b=1e-6),1==a.degree){if(c){for(var d=[],e=0,f=a.controlPoints.length;f>e;){var g=e++;d.push([a.knots[g+1]].concat(verb.eval.Eval.dehomogenize(a.controlPoints[g])))}return d}return a.controlPoints.map(verb.eval.Eval.dehomogenize)}return verb.eval.Tess.rationalCurveAdaptiveSampleRange(a,a.knots[0],verb.core.ArrayExtensions.last(a.knots),b,c)},verb.eval.Tess.rationalCurveAdaptiveSampleRange=function(a,b,c,d,e){var f=verb.eval.Eval.rationalCurvePoint(a,b),g=verb.eval.Eval.rationalCurvePoint(a,c),h=.5+.2*Math.random(),i=b+(c-b)*h,j=verb.eval.Eval.rationalCurvePoint(a,i),k=verb.core.Vec.sub(f,g),l=verb.core.Vec.sub(f,j);if(verb.core.Vec.dot(k,k)<d&&verb.core.Vec.dot(l,l)>d||!verb.core.Trig.threePointsAreFlat(f,j,g,d)){var m=b+.5*(c-b),n=verb.eval.Tess.rationalCurveAdaptiveSampleRange(a,b,m,d,e),o=verb.eval.Tess.rationalCurveAdaptiveSampleRange(a,m,c,d,e);return n.slice(0,-1).concat(o)}return e?[[b].concat(f),[c].concat(g)]:[f,g]},verb.eval.Tess.rationalSurfaceNaive=function(a,b,c){1>b&&(b=1),1>c&&(c=1);for(var d=(a.degreeU,a.degreeV,a.controlPoints,a.knotsU),e=a.knotsV,f=verb.core.ArrayExtensions.last(d)-d[0],g=verb.core.ArrayExtensions.last(e)-e[0],h=f/b,i=g/c,j=[],k=[],l=[],m=0,n=b+1;n>m;)for(var o=m++,p=0,q=c+1;q>p;){var r=p++,s=o*h,t=r*i;k.push([s,t]);var u=verb.eval.Eval.rationalSurfaceDerivatives(a,s,t,1),v=u[0][0];j.push(v);var w=verb.core.Vec.normalized(verb.core.Vec.cross(u[1][0],u[0][1]));l.push(w)}for(var x=[],y=0;b>y;)for(var z=y++,A=0;c>A;){var B=A++,C=z*(c+1)+B,D=(z+1)*(c+1)+B,E=D+1,F=C+1,G=[C,D,E],H=[C,E,F];x.push(G),x.push(H)}return new verb.core.MeshData(x,j,l,k)},verb.eval.Tess.divideRationalSurfaceAdaptive=function(a,b){null==b&&(b=new verb.core.AdaptiveRefinementOptions),null!=b.minDivsU?b.minDivsU=b.minDivsU:b.minDivsU=1,null!=b.minDivsV?b.minDivsU=b.minDivsV:b.minDivsU=1,null!=b.refine?b.refine=b.refine:b.refine=!0;var c,d=2*(a.controlPoints.length-1),e=2*(a.controlPoints[0].length-1);c=b.minDivsU>d?b.minDivsU=b.minDivsU:b.minDivsU=d;var f;f=b.minDivsV>e?b.minDivsV=b.minDivsV:b.minDivsV=e;for(var g=verb.core.ArrayExtensions.last(a.knotsU),h=a.knotsU[0],i=verb.core.ArrayExtensions.last(a.knotsV),j=a.knotsV[0],k=(g-h)/c,l=(i-j)/f,m=[],n=[],o=0,p=f+1;p>o;){for(var q=o++,r=[],s=0,t=c+1;t>s;){var u=s++,v=h+k*u,w=j+l*q,x=verb.eval.Eval.rationalSurfaceDerivatives(a,v,w,1),y=verb.core.Vec.normalized(verb.core.Vec.cross(x[0][1],x[1][0]));r.push(new verb.core.SurfacePoint(x[0][0],y,[v,w],-1,verb.core.Vec.isZero(y)))}n.push(r)}for(var z=0;f>z;)for(var A=z++,B=0;c>B;){var C=B++,D=[n[f-A-1][C],n[f-A-1][C+1],n[f-A][C+1],n[f-A][C]];m.push(new verb.core.AdaptiveRefinementNode(a,D))}if(!b.refine)return m;for(var E=0;f>E;)for(var F=E++,G=0;c>G;){var H=G++,I=F*c+H,J=verb.eval.Tess.north(I,F,H,c,f,m),K=verb.eval.Tess.east(I,F,H,c,f,m),L=verb.eval.Tess.south(I,F,H,c,f,m),M=verb.eval.Tess.west(I,F,H,c,f,m);m[I].neighbors=[L,K,J,M],m[I].divide(b)}return m},verb.eval.Tess.north=function(a,b,c,d,e,f){return 0==b?null:f[a-d]},verb.eval.Tess.south=function(a,b,c,d,e,f){return b==e-1?null:f[a+d]},verb.eval.Tess.east=function(a,b,c,d,e,f){return c==d-1?null:f[a+1]},verb.eval.Tess.west=function(a,b,c,d,e,f){return 0==c?null:f[a-1]},verb.eval.Tess.triangulateAdaptiveRefinementNodeTree=function(a){for(var b=verb.core.MeshData.empty(),c=0;c<a.length;){var d=a[c];++c,d.triangulate(b)}return b},verb.eval.Tess.rationalSurfaceAdaptive=function(a,b){b=null!=b?b:new verb.core.AdaptiveRefinementOptions;var c=verb.eval.Tess.divideRationalSurfaceAdaptive(a,b);return verb.eval.Tess.triangulateAdaptiveRefinementNodeTree(c)},verb.exe={},verb.exe.AsyncObject=$hx_exports.exe.AsyncObject=function(){},verb.exe.AsyncObject.__name__=["verb","exe","AsyncObject"],verb.exe.AsyncObject.prototype={defer:function(a,b,c){return verb.exe.Dispatcher.dispatchMethod(a,b,c)}},verb.exe.Dispatcher=function(){},verb.exe.Dispatcher.__name__=["verb","exe","Dispatcher"],verb.exe.Dispatcher.init=function(){verb.exe.Dispatcher._init||(verb.exe.Dispatcher._workerPool=new verb.exe.WorkerPool(verb.exe.Dispatcher.THREADS),verb.exe.Dispatcher._init=!0)},verb.exe.Dispatcher.dispatchMethod=function(a,b,c){verb.exe.Dispatcher.init();var d=new promhx.Deferred,e=function(a){d.resolve(a)};return verb.exe.Dispatcher._workerPool.addWork(Type.getClassName(a),b,c,e),new promhx.Promise(d)},verb.exe.Work=$hx_exports.exe.Work=function(a,b,c){this.className=a,this.methodName=b,this.args=c,this.id=verb.exe.Work.uuid++},verb.exe.Work.__name__=["verb","exe","Work"],verb.exe.WorkerPool=$hx_exports.exe.WorkerPool=function(a,b){null==b&&(b="verb.js"),this._callbacks=new haxe.ds.IntMap,this._working=new haxe.ds.IntMap,this._pool=[],this._queue=[];for(var c=0;a>c;){c++;this._pool.push(new Worker(verb.exe.WorkerPool.basePath+b))}},verb.exe.WorkerPool.__name__=["verb","exe","WorkerPool"],verb.exe.WorkerPool.prototype={addWork:function(a,b,c,d){var e=new verb.exe.Work(a,b,c);this._callbacks.set(e.id,d),this._queue.push(e),this.processQueue()},processQueue:function(){for(var a=this;this._queue.length>0&&this._pool.length>0;){var b=this._queue.shift(),c=[b.id],d=[this._pool.shift()];this._working.set(c[0],d[0]),d[0].onmessage=function(b,c){return function(d){a._working.remove(c[0]),a._pool.push(b[0]);try{a._callbacks.exists(c[0])&&(a._callbacks.get(c[0])(d.data.result),a._callbacks.remove(c[0]))}catch(e){haxe.Log.trace(e,{fileName:"WorkerPool.hx",lineNumber:78,className:"verb.exe.WorkerPool",methodName:"processQueue"})}a.processQueue()}}(d,c),d[0].postMessage(b)}}},verb.geom={},verb.geom.ICurve=function(){},verb.geom.ICurve.__name__=["verb","geom","ICurve"],verb.geom.NurbsCurve=$hx_exports.geom.NurbsCurve=function(a){this._data=verb.eval.Check.isValidNurbsCurveData(a)},verb.geom.NurbsCurve.__name__=["verb","geom","NurbsCurve"],verb.geom.NurbsCurve.__interfaces__=[verb.geom.ICurve],verb.geom.NurbsCurve.byKnotsControlPointsWeights=function(a,b,c,d){return new verb.geom.NurbsCurve(new verb.core.NurbsCurveData(a,b.slice(),verb.eval.Eval.homogenize1d(c,d)))},verb.geom.NurbsCurve.byPoints=function(a,b){return null==b&&(b=3),new verb.geom.NurbsCurve(verb.eval.Make.rationalInterpCurve(a,b))},verb.geom.NurbsCurve.__super__=verb.exe.AsyncObject,verb.geom.NurbsCurve.prototype=$extend(verb.exe.AsyncObject.prototype,{degree:function(){return this._data.degree},knots:function(){return this._data.knots.slice(0)},controlPoints:function(){return verb.eval.Eval.dehomogenize1d(this._data.controlPoints)},weights:function(){return verb.eval.Eval.weight1d(this._data.controlPoints)},asNurbs:function(){return new verb.core.NurbsCurveData(this.degree(),this.knots(),verb.eval.Eval.homogenize1d(this.controlPoints(),this.weights()))},clone:function(){return new verb.geom.NurbsCurve(this._data)},domain:function(){return new verb.core.Interval(verb.core.ArrayExtensions.first(this._data.knots),verb.core.ArrayExtensions.last(this._data.knots))},transform:function(a){return new verb.geom.NurbsCurve(verb.eval.Modify.rationalCurveTransform(this._data,a))},transformAsync:function(a){return this.defer(verb.eval.Modify,"rationalCurveTransform",[this._data,a]).then(function(a){return new verb.geom.NurbsCurve(a)})},point:function(a){return verb.eval.Eval.rationalCurvePoint(this._data,a)},pointAsync:function(a){return this.defer(verb.eval.Eval,"rationalCurvePoint",[this._data,a])},tangent:function(a){return verb.eval.Eval.rationalCurveTangent(this._data,a)},tangentAsync:function(a){return this.defer(verb.eval.Eval,"rationalCurveTangent",[this._data,a])},derivatives:function(a,b){return null==b&&(b=1),verb.eval.Eval.rationalCurveDerivatives(this._data,a,b)},derivativesAsync:function(a,b){return null==b&&(b=1),this.defer(verb.eval.Eval,"rationalCurveDerivatives",[this._data,a,b])},closestPoint:function(a){return verb.eval.Analyze.rationalCurveClosestPoint(this._data,a)},closestPointAsync:function(a){return this.defer(verb.eval.Analyze,"rationalCurveClosestPoint",[this._data,a])},closestParam:function(a){return verb.eval.Analyze.rationalCurveClosestParam(this._data,a)},closestParamAsync:function(a){return this.defer(verb.eval.Analyze,"rationalCurveClosestParam",[this._data,a])},length:function(){return verb.eval.Analyze.rationalCurveArcLength(this._data)},lengthAsync:function(){return this.defer(verb.eval.Analyze,"rationalCurveArcLength",[this._data])},lengthAtParam:function(a){return verb.eval.Analyze.rationalCurveArcLength(this._data,a)},lengthAtParamAsync:function(){return this.defer(verb.eval.Analyze,"rationalCurveArcLength",[this._data])},paramAtLength:function(a,b){return verb.eval.Analyze.rationalCurveParamAtArcLength(this._data,a,b)},paramAtLengthAsync:function(a,b){return this.defer(verb.eval.Analyze,"rationalCurveParamAtArcLength",[this._data,a,b])},divideByEqualArcLength:function(a){return verb.eval.Divide.rationalCurveByEqualArcLength(this._data,a)},divideByEqualArcLengthAsync:function(a){return this.defer(verb.eval.Divide,"rationalCurveByEqualArcLength",[this._data,a])},divideByArcLength:function(a){return verb.eval.Divide.rationalCurveByArcLength(this._data,a)},divideByArcLengthAsync:function(a){return this.defer(verb.eval.Divide,"rationalCurveByArcLength",[this._data,a])},split:function(a){return verb.eval.Divide.curveSplit(this._data,a).map(function(a){return new verb.geom.NurbsCurve(a)})},splitAsync:function(a){return this.defer(verb.eval.Divide,"curveSplit",[this._data,a]).then(function(a){return a.map(function(a){return new verb.geom.NurbsCurve(a)})})},reverse:function(){return new verb.geom.NurbsCurve(verb.eval.Modify.curveReverse(this._data))},reverseAsync:function(){return this.defer(verb.eval.Modify,"curveReverse",[this._data]).then(function(a){return new verb.geom.NurbsCurve(a)})},tessellate:function(a){return verb.eval.Tess.rationalCurveAdaptiveSample(this._data,a,!1)},tessellateAsync:function(a){return this.defer(verb.eval.Tess,"rationalCurveAdaptiveSample",[this._data,a,!1])}}),verb.geom.Arc=$hx_exports.geom.Arc=function(a,b,c,d,e,f){verb.geom.NurbsCurve.call(this,verb.eval.Make.arc(a,b,c,d,e,f)),this._center=a,this._xaxis=b,this._yaxis=c,this._radius=d,this._minAngle=e,this._maxAngle=f},verb.geom.Arc.__name__=["verb","geom","Arc"],verb.geom.Arc.__super__=verb.geom.NurbsCurve,verb.geom.Arc.prototype=$extend(verb.geom.NurbsCurve.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},radius:function(){return this._radius},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle}}),verb.geom.BezierCurve=$hx_exports.geom.BezierCurve=function(a,b){verb.geom.NurbsCurve.call(this,verb.eval.Make.rationalBezierCurve(a,b))},verb.geom.BezierCurve.__name__=["verb","geom","BezierCurve"],verb.geom.BezierCurve.__super__=verb.geom.NurbsCurve,verb.geom.BezierCurve.prototype=$extend(verb.geom.NurbsCurve.prototype,{}),verb.geom.Circle=$hx_exports.geom.Circle=function(a,b,c,d){verb.geom.Arc.call(this,a,b,c,d,0,2*Math.PI)},verb.geom.Circle.__name__=["verb","geom","Circle"],verb.geom.Circle.__super__=verb.geom.Arc,verb.geom.Circle.prototype=$extend(verb.geom.Arc.prototype,{}),verb.geom.ISurface=function(){},verb.geom.ISurface.__name__=["verb","geom","ISurface"],verb.geom.NurbsSurface=$hx_exports.geom.NurbsSurface=function(a){this._data=verb.eval.Check.isValidNurbsSurfaceData(a)},verb.geom.NurbsSurface.__name__=["verb","geom","NurbsSurface"],
verb.geom.NurbsSurface.__interfaces__=[verb.geom.ISurface],verb.geom.NurbsSurface.byKnotsControlPointsWeights=function(a,b,c,d,e,f){return new verb.geom.NurbsSurface(new verb.core.NurbsSurfaceData(a,b,c,d,verb.eval.Eval.homogenize2d(e,f)))},verb.geom.NurbsSurface.byCorners=function(a,b,c,d){return new verb.geom.NurbsSurface(verb.eval.Make.fourPointSurface(a,b,c,d))},verb.geom.NurbsSurface.byLoftingCurves=function(a,b){return new verb.geom.NurbsSurface(verb.eval.Make.loftedSurface(function(b){for(var c,d=[],e=0;e<a.length;){var f=a[e];++e,d.push(f.asNurbs())}return c=d}(this),b))},verb.geom.NurbsSurface.__super__=verb.exe.AsyncObject,verb.geom.NurbsSurface.prototype=$extend(verb.exe.AsyncObject.prototype,{degreeU:function(){return this._data.degreeU},degreeV:function(){return this._data.degreeV},knotsU:function(){return this._data.knotsU.slice(0)},knotsV:function(){return this._data.knotsV.slice(0)},controlPoints:function(){return verb.eval.Eval.dehomogenize2d(this._data.controlPoints)},weights:function(){return verb.eval.Eval.weight2d(this._data.controlPoints)},asNurbs:function(){return new verb.core.NurbsSurfaceData(this.degreeU(),this.degreeV(),this.knotsU(),this.knotsV(),verb.eval.Eval.homogenize2d(this.controlPoints(),this.weights()))},clone:function(){return new verb.geom.NurbsSurface(this.asNurbs())},domainU:function(){return new verb.core.Interval(verb.core.ArrayExtensions.first(this._data.knotsU),verb.core.ArrayExtensions.last(this._data.knotsU))},domainV:function(){return new verb.core.Interval(verb.core.ArrayExtensions.first(this._data.knotsV),verb.core.ArrayExtensions.last(this._data.knotsV))},point:function(a,b){return verb.eval.Eval.rationalSurfacePoint(this._data,a,b)},pointAsync:function(a,b){return this.defer(verb.eval.Eval,"rationalSurfacePoint",[this._data,a,b])},normal:function(a,b){return verb.eval.Eval.rationalSurfaceNormal(this._data,a,b)},normalAsync:function(a,b){return this.defer(verb.eval.Eval,"rationalSurfaceNormal",[this._data,a,b])},derivatives:function(a,b,c){return null==c&&(c=1),verb.eval.Eval.rationalSurfaceDerivatives(this._data,a,b,c)},derivativesAsync:function(a,b,c){return null==c&&(c=1),this.defer(verb.eval.Eval,"rationalSurfaceDerivatives",[this._data,a,b,c])},closestParam:function(a){return verb.eval.Analyze.rationalSurfaceClosestParam(this._data,a)},closestParamAsync:function(a){return this.defer(verb.eval.Analyze,"rationalSurfaceClosestParam",[this._data,a])},closestPoint:function(a){return verb.eval.Analyze.rationalSurfaceClosestPoint(this._data,a)},closestPointAsync:function(a){return this.defer(verb.eval.Analyze,"rationalSurfaceClosestPoint",[this._data,a])},split:function(a,b){return null==b&&(b=!1),verb.eval.Divide.surfaceSplit(this._data,a,b).map(function(a){return new verb.geom.NurbsSurface(a)})},splitAsync:function(a,b){return null==b&&(b=!1),this.defer(verb.eval.Divide,"surfaceSplit",[this._data,a,b]).then(function(a){return a.map(function(a){return new verb.geom.NurbsSurface(a)})})},reverse:function(a){return null==a&&(a=!1),new verb.geom.NurbsSurface(verb.eval.Modify.surfaceReverse(this._data,a))},reverseAsync:function(a){return null==a&&(a=!1),this.defer(verb.eval.Modify,"surfaceReverse",[this._data,a]).then(function(a){return new verb.geom.NurbsSurface(a)})},isocurve:function(a,b){return null==b&&(b=!1),new verb.geom.NurbsCurve(verb.eval.Make.surfaceIsocurve(this._data,a,b))},isocurveAsync:function(a,b){return null==b&&(b=!1),this.defer(verb.eval.Make,"surfaceIsocurve",[this._data,a,b]).then(function(a){return new verb.geom.NurbsCurve(a)})},boundaries:function(a){return verb.eval.Make.surfaceBoundaryCurves(this._data).map(function(a){return new verb.geom.NurbsCurve(a)})},boundariesAsync:function(a){return this.defer(verb.eval.Make,"surfaceBoundaryCurves",[this._data]).then(function(a){return a.map(function(a){return new verb.geom.NurbsCurve(a)})})},tessellate:function(a){return verb.eval.Tess.rationalSurfaceAdaptive(this._data,a)},tessellateAsync:function(a){return this.defer(verb.eval.Tess,"rationalSurfaceAdaptive",[this._data,a])},transform:function(a){return new verb.geom.NurbsSurface(verb.eval.Modify.rationalSurfaceTransform(this._data,a))},transformAsync:function(a){return this.defer(verb.eval.Modify,"rationalSurfaceTransform",[this._data,a]).then(function(a){return new verb.geom.NurbsSurface(a)})}}),verb.geom.ConicalSurface=$hx_exports.geom.ConicalSurface=function(a,b,c,d,e){verb.geom.NurbsSurface.call(this,verb.eval.Make.conicalSurface(a,b,c,d,e)),this._axis=a,this._xaxis=b,this._base=c,this._height=d,this._radius=e},verb.geom.ConicalSurface.__name__=["verb","geom","ConicalSurface"],verb.geom.ConicalSurface.__super__=verb.geom.NurbsSurface,verb.geom.ConicalSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius}}),verb.geom.CylindricalSurface=$hx_exports.geom.CylindricalSurface=function(a,b,c,d,e){verb.geom.NurbsSurface.call(this,verb.eval.Make.cylindricalSurface(a,b,c,d,e)),this._axis=a,this._xaxis=b,this._base=c,this._height=d,this._radius=e},verb.geom.CylindricalSurface.__name__=["verb","geom","CylindricalSurface"],verb.geom.CylindricalSurface.__super__=verb.geom.NurbsSurface,verb.geom.CylindricalSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{axis:function(){return this._axis},xaxis:function(){return this._xaxis},base:function(){return this._base},height:function(){return this._height},radius:function(){return this._radius}}),verb.geom.EllipseArc=$hx_exports.geom.EllipseArc=function(a,b,c,d,e){verb.geom.NurbsCurve.call(this,verb.eval.Make.ellipseArc(a,b,c,d,e)),this._center=a,this._xaxis=b,this._yaxis=c,this._minAngle=d,this._maxAngle=e},verb.geom.EllipseArc.__name__=["verb","geom","EllipseArc"],verb.geom.EllipseArc.__super__=verb.geom.NurbsCurve,verb.geom.EllipseArc.prototype=$extend(verb.geom.NurbsCurve.prototype,{center:function(){return this._center},xaxis:function(){return this._xaxis},yaxis:function(){return this._yaxis},minAngle:function(){return this._minAngle},maxAngle:function(){return this._maxAngle}}),verb.geom.Ellipse=$hx_exports.geom.Ellipse=function(a,b,c){verb.geom.EllipseArc.call(this,a,b,c,0,2*Math.PI)},verb.geom.Ellipse.__name__=["verb","geom","Ellipse"],verb.geom.Ellipse.__super__=verb.geom.EllipseArc,verb.geom.Ellipse.prototype=$extend(verb.geom.EllipseArc.prototype,{}),verb.geom.ExtrudedSurface=$hx_exports.geom.ExtrudedSurface=function(a,b){verb.geom.NurbsSurface.call(this,verb.eval.Make.extrudedSurface(verb.core.Vec.normalized(b),verb.core.Vec.norm(b),a.asNurbs())),this._profile=a,this._direction=b},verb.geom.ExtrudedSurface.__name__=["verb","geom","ExtrudedSurface"],verb.geom.ExtrudedSurface.__super__=verb.geom.NurbsSurface,verb.geom.ExtrudedSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{profile:function(){return this._profile},direction:function(){return this._direction}}),verb.geom.Intersect=$hx_exports.geom.Intersect=function(){},verb.geom.Intersect.__name__=["verb","geom","Intersect"],verb.geom.Intersect.curves=function(a,b,c){return null==c&&(c=.001),verb.eval.Intersect.curves(a.asNurbs(),b.asNurbs(),c)},verb.geom.Intersect.curvesAsync=function(a,b,c){return null==c&&(c=.001),verb.exe.Dispatcher.dispatchMethod(verb.eval.Intersect,"curves",[a.asNurbs(),b.asNurbs(),c])},verb.geom.Intersect.curveAndSurface=function(a,b,c){return null==c&&(c=.001),verb.eval.Intersect.curveAndSurface(a.asNurbs(),b.asNurbs(),c)},verb.geom.Intersect.curveAndSurfaceAsync=function(a,b,c){return null==c&&(c=.001),verb.exe.Dispatcher.dispatchMethod(verb.eval.Intersect,"curveAndSurface",[a.asNurbs(),b.asNurbs(),c])},verb.geom.Intersect.surfaces=function(a,b,c){return null==c&&(c=.001),verb.eval.Intersect.surfaces(a.asNurbs(),b.asNurbs(),c).map(function(a){return new verb.geom.NurbsCurve(a)})},verb.geom.Intersect.surfacesAsync=function(a,b,c){return null==c&&(c=.001),verb.exe.Dispatcher.dispatchMethod(verb.eval.Intersect,"surfaces",[a.asNurbs(),b.asNurbs(),c]).then(function(a){return a.map(function(a){return new verb.geom.NurbsCurve(a)})})},verb.geom.Line=$hx_exports.geom.Line=function(a,b){verb.geom.NurbsCurve.call(this,verb.eval.Make.polyline([a,b])),this._start=a,this._end=b},verb.geom.Line.__name__=["verb","geom","Line"],verb.geom.Line.__super__=verb.geom.NurbsCurve,verb.geom.Line.prototype=$extend(verb.geom.NurbsCurve.prototype,{start:function(){return this._start},end:function(){return this._end}}),verb.geom.RevolvedSurface=$hx_exports.geom.RevolvedSurface=function(a,b,c,d){verb.geom.NurbsSurface.call(this,verb.eval.Make.revolvedSurface(a.asNurbs(),b,c,d)),this._profile=a,this._center=b,this._axis=c,this._angle=d},verb.geom.RevolvedSurface.__name__=["verb","geom","RevolvedSurface"],verb.geom.RevolvedSurface.__super__=verb.geom.NurbsSurface,verb.geom.RevolvedSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{profile:function(){return this._profile},center:function(){return this._center},axis:function(){return this._center},angle:function(){return this._angle}}),verb.geom.SphericalSurface=$hx_exports.geom.SphericalSurface=function(a,b){verb.geom.NurbsSurface.call(this,verb.eval.Make.sphericalSurface(a,[0,0,1],[1,0,0],b)),this._center=a,this._radius=b},verb.geom.SphericalSurface.__name__=["verb","geom","SphericalSurface"],verb.geom.SphericalSurface.__super__=verb.geom.NurbsSurface,verb.geom.SphericalSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{center:function(){return this._center},radius:function(){return this._radius}}),verb.geom.SweptSurface=$hx_exports.geom.SweptSurface=function(a,b){verb.geom.NurbsSurface.call(this,verb.eval.Make.rationalTranslationalSurface(a.asNurbs(),b.asNurbs())),this._profile=a,this._rail=b},verb.geom.SweptSurface.__name__=["verb","geom","SweptSurface"],verb.geom.SweptSurface.__super__=verb.geom.NurbsSurface,verb.geom.SweptSurface.prototype=$extend(verb.geom.NurbsSurface.prototype,{profile:function(){return this._profile},rail:function(){return this._rail}});var $_,$fid=0;Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(a){return isFinite(a)},Math.isNaN=function(a){return isNaN(a)},String.__name__=["String"],Array.__name__=["Array"],null==Array.prototype.map&&(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++;b[e]=a(this[e])}return b}),null==Array.prototype.filter&&(Array.prototype.filter=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++,f=this[e];a(f)&&b.push(f)}return b});var global=window;!function(global,undefined){function canUseNextTick(){return"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)}function canUseMessageChannel(){return!!global.MessageChannel}function canUsePostMessage(){if(!global.postMessage||global.importScripts)return!1;var a=!0,b=global.onmessage;return global.onmessage=function(){a=!1},global.postMessage("","*"),global.onmessage=b,a}function canUseReadyStateChange(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")}function installNextTickImplementation(a){a.setImmediate=function(){var a=tasks.addFromSetImmediateArguments(arguments);return process.nextTick(function(){tasks.runIfPresent(a)}),a}}function installMessageChannelImplementation(a){var b=new global.MessageChannel;b.port1.onmessage=function(a){var b=a.data;tasks.runIfPresent(b)},a.setImmediate=function(){var a=tasks.addFromSetImmediateArguments(arguments);return b.port2.postMessage(a),a}}function installPostMessageImplementation(a){function b(a,b){return"string"==typeof a&&a.substring(0,b.length)===b}function c(a){if(a.source===global&&b(a.data,d)){var c=a.data.substring(d.length);tasks.runIfPresent(c)}}var d="com.bn.NobleJS.setImmediate"+Math.random();global.addEventListener?global.addEventListener("message",c,!1):global.attachEvent("onmessage",c),a.setImmediate=function(){var a=tasks.addFromSetImmediateArguments(arguments);return global.postMessage(d+a,"*"),a}}function installReadyStateChangeImplementation(a){a.setImmediate=function(){var a=tasks.addFromSetImmediateArguments(arguments),b=global.document.createElement("script");return b.onreadystatechange=function(){tasks.runIfPresent(a),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},global.document.documentElement.appendChild(b),a}}function installSetTimeoutImplementation(a){a.setImmediate=function(){var a=tasks.addFromSetImmediateArguments(arguments);return global.setTimeout(function(){tasks.runIfPresent(a)},0),a}}var tasks=function(){function Task(a,b){this.handler=a,this.args=b}Task.prototype.run=function(){if("function"==typeof this.handler)this.handler.apply(undefined,this.args);else{var scriptSource=""+this.handler;eval(scriptSource)}};var nextHandle=1,tasksByHandle={},currentlyRunningATask=!1;return{addFromSetImmediateArguments:function(a){var b=a[0],c=Array.prototype.slice.call(a,1),d=new Task(b,c),e=nextHandle++;return tasksByHandle[e]=d,e},runIfPresent:function(a){if(currentlyRunningATask)global.setTimeout(function(){tasks.runIfPresent(a)},0);else{var b=tasksByHandle[a];if(b){currentlyRunningATask=!0;try{b.run()}finally{delete tasksByHandle[a],currentlyRunningATask=!1}}}},remove:function(a){delete tasksByHandle[a]}}}();if(!global.setImmediate){var attachTo="function"==typeof Object.getPrototypeOf&&"setTimeout"in Object.getPrototypeOf(global)?Object.getPrototypeOf(global):global;canUseNextTick()?installNextTickImplementation(attachTo):canUsePostMessage()?installPostMessageImplementation(attachTo):canUseMessageChannel()?installMessageChannelImplementation(attachTo):canUseReadyStateChange()?installReadyStateChangeImplementation(attachTo):installSetTimeoutImplementation(attachTo),attachTo.clearImmediate=tasks.remove}}("object"==typeof global&&global?global:this),promhx.base.EventLoop.queue=new List,verb.core.Binomial.memo=new haxe.ds.IntMap,verb.core.Constants.TOLERANCE=1e-6,verb.core.Constants.EPSILON=1e-10,verb.eval.Analyze.Tvalues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],verb.eval.Analyze.Cvalues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],verb.eval.ExpIntersect.INIT_STEP_LENGTH=.001,verb.eval.ExpIntersect.LINEAR_STEP_LENGTH=.1,verb.exe.Dispatcher.THREADS=1,verb.exe.Dispatcher._init=!1,verb.exe.Work.uuid=0,verb.exe.WorkerPool.basePath="",verb.Verb.main()}(verb),verb});